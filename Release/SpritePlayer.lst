                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.6.0 #9615 (MINGW64)
                              4 ;--------------------------------------------------------
                              5 	.module SpritePlayer
                              6 	.optsdcc -mgbz80
                              7 	
                              8 ;--------------------------------------------------------
                              9 ; Public variables in this module
                             10 ;--------------------------------------------------------
                             11 	.globl _PlayFx
                             12 	.globl _SpriteManagerRemoveSprite
                             13 	.globl _SpriteManagerRemove
                             14 	.globl _SpriteManagerAdd
                             15 	.globl _SetState
                             16 	.globl _CheckCollision
                             17 	.globl _TranslateSprite
                             18 	.globl _SetSpriteAnim
                             19 	.globl _have_bomb
                             20 	.globl _next_lvl
                             21 	.globl _door_y
                             22 	.globl _door_x
                             23 	.globl _bank_SPRITE_PLAYER
                             24 	.globl _anim_up
                             25 	.globl _anim_left
                             26 	.globl _anim_right
                             27 	.globl _anim_down
                             28 	.globl _anim_idle
                             29 	.globl _Start_SPRITE_PLAYER
                             30 	.globl _Update_SPRITE_PLAYER
                             31 	.globl _Destroy_SPRITE_PLAYER
                             32 ;--------------------------------------------------------
                             33 ; ram data
                             34 ;--------------------------------------------------------
                             35 	.area _DATA
   0000                      36 _bank_SPRITE_PLAYER::
   0000                      37 	.ds 1
   0001                      38 _door_x::
   0001                      39 	.ds 2
   0003                      40 _door_y::
   0003                      41 	.ds 2
   0005                      42 _next_lvl::
   0005                      43 	.ds 2
   0007                      44 _have_bomb::
   0007                      45 	.ds 2
                             46 ;--------------------------------------------------------
                             47 ; absolute external ram data
                             48 ;--------------------------------------------------------
                             49 	.area _DABS (ABS)
                             50 ;--------------------------------------------------------
                             51 ; global & static initialisations
                             52 ;--------------------------------------------------------
                             53 	.area _HOME
                             54 	.area _GSINIT
                             55 	.area _GSFINAL
                             56 	.area _GSINIT
                             57 ;SpritePlayer.c:14: UINT8 bank_SPRITE_PLAYER = 2;
   0000 21r00r00             58 	ld	hl,#_bank_SPRITE_PLAYER
   0003 36 02                59 	ld	(hl),#0x02
                             60 ;SpritePlayer.c:19: int have_bomb=3;
   0005 21r07r00             61 	ld	hl,#_have_bomb
   0008 36 03                62 	ld	(hl),#0x03
   000A 23                   63 	inc	hl
   000B 36 00                64 	ld	(hl),#0x00
                             65 ;--------------------------------------------------------
                             66 ; Home
                             67 ;--------------------------------------------------------
                             68 	.area _HOME
                             69 	.area _HOME
                             70 ;--------------------------------------------------------
                             71 ; code
                             72 ;--------------------------------------------------------
                             73 	.area _CODE_2
                             74 ;SpritePlayer.c:21: void Start_SPRITE_PLAYER() {
                             75 ;	---------------------------------
                             76 ; Function Start_SPRITE_PLAYER
                             77 ; ---------------------------------
   0000                      78 _Start_SPRITE_PLAYER::
                             79 ;SpritePlayer.c:22: THIS->coll_x = 1;
   0000 21r01r00             80 	ld	hl,#_THIS + 1
   0003 2B                   81 	dec	hl
   0004 4E                   82 	ld	c,(hl)
   0005 23                   83 	inc	hl
   0006 46                   84 	ld	b,(hl)
   0007 21 0C 00             85 	ld	hl,#0x000c
   000A 09                   86 	add	hl,bc
   000B 4D                   87 	ld	c,l
   000C 44                   88 	ld	b,h
   000D 3E 01                89 	ld	a,#0x01
   000F 02                   90 	ld	(bc),a
                             91 ;SpritePlayer.c:23: THIS->coll_y = 0;
   0010 21r01r00             92 	ld	hl,#_THIS + 1
   0013 2B                   93 	dec	hl
   0014 4E                   94 	ld	c,(hl)
   0015 23                   95 	inc	hl
   0016 46                   96 	ld	b,(hl)
   0017 21 0D 00             97 	ld	hl,#0x000d
   001A 09                   98 	add	hl,bc
   001B 4D                   99 	ld	c,l
   001C 44                  100 	ld	b,h
   001D AF                  101 	xor	a, a
   001E 02                  102 	ld	(bc),a
                            103 ;SpritePlayer.c:24: THIS->coll_w = 13;
   001F 21r01r00            104 	ld	hl,#_THIS + 1
   0022 2B                  105 	dec	hl
   0023 4E                  106 	ld	c,(hl)
   0024 23                  107 	inc	hl
   0025 46                  108 	ld	b,(hl)
   0026 21 0E 00            109 	ld	hl,#0x000e
   0029 09                  110 	add	hl,bc
   002A 4D                  111 	ld	c,l
   002B 44                  112 	ld	b,h
   002C 3E 0D               113 	ld	a,#0x0d
   002E 02                  114 	ld	(bc),a
                            115 ;SpritePlayer.c:25: THIS->coll_h = 16;
   002F 21r01r00            116 	ld	hl,#_THIS + 1
   0032 2B                  117 	dec	hl
   0033 4E                  118 	ld	c,(hl)
   0034 23                  119 	inc	hl
   0035 46                  120 	ld	b,(hl)
   0036 21 0F 00            121 	ld	hl,#0x000f
   0039 09                  122 	add	hl,bc
   003A 4D                  123 	ld	c,l
   003B 44                  124 	ld	b,h
   003C 3E 10               125 	ld	a,#0x10
   003E 02                  126 	ld	(bc),a
   003F C9                  127 	ret
   0040                     128 _anim_idle:
   0040 01                  129 	.db #0x01	; 1
   0041 00                  130 	.db #0x00	; 0
   0042                     131 _anim_down:
   0042 02                  132 	.db #0x02	; 2
   0043 01                  133 	.db #0x01	; 1
   0044 02                  134 	.db #0x02	; 2
   0045                     135 _anim_right:
   0045 02                  136 	.db #0x02	; 2
   0046 03                  137 	.db #0x03	; 3
   0047 04                  138 	.db #0x04	; 4
   0048                     139 _anim_left:
   0048 02                  140 	.db #0x02	; 2
   0049 05                  141 	.db #0x05	; 5
   004A 06                  142 	.db #0x06	; 6
   004B                     143 _anim_up:
   004B 02                  144 	.db #0x02	; 2
   004C 07                  145 	.db #0x07	; 7
   004D 08                  146 	.db #0x08	; 8
                            147 ;SpritePlayer.c:28: void Update_SPRITE_PLAYER() {
                            148 ;	---------------------------------
                            149 ; Function Update_SPRITE_PLAYER
                            150 ; ---------------------------------
   004E                     151 _Update_SPRITE_PLAYER::
   004E E8 FD               152 	add	sp, #-3
                            153 ;SpritePlayer.c:33: if(KEY_PRESSED(J_UP)){
   0050 21r00r00            154 	ld	hl,#_keys
   0053 4E                  155 	ld	c,(hl)
   0054 06 00               156 	ld	b,#0x00
   0056 CB 51               157 	bit	2, c
   0058 CArB2r00            158 	jp	Z,00102$
                            159 ;SpritePlayer.c:34: THIS->y--;
   005B 21r01r00            160 	ld	hl,#_THIS + 1
   005E 2B                  161 	dec	hl
   005F 4E                  162 	ld	c,(hl)
   0060 23                  163 	inc	hl
   0061 46                  164 	ld	b,(hl)
   0062 21 09 00            165 	ld	hl,#0x0009
   0065 09                  166 	add	hl,bc
   0066 7D                  167 	ld	a,l
   0067 54                  168 	ld	d,h
   0068 F8 01               169 	ldhl	sp,#1
   006A 22                  170 	ld	(hl+),a
   006B 72                  171 	ld	(hl),d
   006C 2B                  172 	dec	hl
   006D 5E                  173 	ld	e,(hl)
   006E 23                  174 	inc	hl
   006F 56                  175 	ld	d,(hl)
   0070 1A                  176 	ld	a,(de)
   0071 4F                  177 	ld	c,a
   0072 13                  178 	inc	de
   0073 1A                  179 	ld	a,(de)
   0074 47                  180 	ld	b,a
   0075 0B                  181 	dec	bc
   0076 2B                  182 	dec	hl
   0077 2A                  183 	ld	a,(hl+)
   0078 66                  184 	ld	h,(hl)
   0079 6F                  185 	ld	l,a
   007A 71                  186 	ld	(hl),c
   007B 23                  187 	inc	hl
   007C 70                  188 	ld	(hl),b
                            189 ;SpritePlayer.c:35: SetSpriteAnim(THIS, anim_up, 10);
   007D 3E 0A               190 	ld	a,#0x0a
   007F F5                  191 	push	af
   0080 33                  192 	inc	sp
   0081 21r4Br00            193 	ld	hl,#_anim_up
   0084 E5                  194 	push	hl
   0085 21r00r00            195 	ld	hl,#_THIS
   0088 2A                  196 	ld	a,(hl+)
   0089 66                  197 	ld	h,(hl)
   008A 6F                  198 	ld	l,a
   008B E5                  199 	push	hl
   008C CDr00r00            200 	call	_SetSpriteAnim
   008F E8 05               201 	add	sp, #5
                            202 ;SpritePlayer.c:36: TranslateSprite(THIS, 0, -1 << delta_time);
   0091 21r00r00            203 	ld	hl,#_delta_time
   0094 7E                  204 	ld	a,(hl)
   0095 F5                  205 	push	af
   0096 06 FF               206 	ld	b,#0xff
   0098 F1                  207 	pop	af
   0099 3C                  208 	inc	a
   009A 18 02               209 	jr	00212$
   009C                     210 00211$:
   009C CB 20               211 	sla	b
   009E                     212 00212$:
   009E 3D                  213 	dec	a
   009F 20 FB               214 	jr	NZ,00211$
   00A1 C5                  215 	push	bc
   00A2 33                  216 	inc	sp
   00A3 AF                  217 	xor	a, a
   00A4 F5                  218 	push	af
   00A5 33                  219 	inc	sp
   00A6 21r00r00            220 	ld	hl,#_THIS
   00A9 2A                  221 	ld	a,(hl+)
   00AA 66                  222 	ld	h,(hl)
   00AB 6F                  223 	ld	l,a
   00AC E5                  224 	push	hl
   00AD CDr00r00            225 	call	_TranslateSprite
   00B0 E8 04               226 	add	sp, #4
   00B2                     227 00102$:
                            228 ;SpritePlayer.c:38: if(KEY_PRESSED(J_DOWN)){
   00B2 21r00r00            229 	ld	hl,#_keys
   00B5 4E                  230 	ld	c,(hl)
   00B6 06 00               231 	ld	b,#0x00
   00B8 CB 59               232 	bit	3, c
   00BA CAr14r01            233 	jp	Z,00104$
                            234 ;SpritePlayer.c:39: THIS->y++;
   00BD 21r01r00            235 	ld	hl,#_THIS + 1
   00C0 2B                  236 	dec	hl
   00C1 4E                  237 	ld	c,(hl)
   00C2 23                  238 	inc	hl
   00C3 46                  239 	ld	b,(hl)
   00C4 21 09 00            240 	ld	hl,#0x0009
   00C7 09                  241 	add	hl,bc
   00C8 7D                  242 	ld	a,l
   00C9 54                  243 	ld	d,h
   00CA F8 01               244 	ldhl	sp,#1
   00CC 22                  245 	ld	(hl+),a
   00CD 72                  246 	ld	(hl),d
   00CE 2B                  247 	dec	hl
   00CF 5E                  248 	ld	e,(hl)
   00D0 23                  249 	inc	hl
   00D1 56                  250 	ld	d,(hl)
   00D2 1A                  251 	ld	a,(de)
   00D3 4F                  252 	ld	c,a
   00D4 13                  253 	inc	de
   00D5 1A                  254 	ld	a,(de)
   00D6 47                  255 	ld	b,a
   00D7 03                  256 	inc	bc
   00D8 2B                  257 	dec	hl
   00D9 2A                  258 	ld	a,(hl+)
   00DA 66                  259 	ld	h,(hl)
   00DB 6F                  260 	ld	l,a
   00DC 71                  261 	ld	(hl),c
   00DD 23                  262 	inc	hl
   00DE 70                  263 	ld	(hl),b
                            264 ;SpritePlayer.c:40: SetSpriteAnim(THIS, anim_down, 10);
   00DF 3E 0A               265 	ld	a,#0x0a
   00E1 F5                  266 	push	af
   00E2 33                  267 	inc	sp
   00E3 21r42r00            268 	ld	hl,#_anim_down
   00E6 E5                  269 	push	hl
   00E7 21r00r00            270 	ld	hl,#_THIS
   00EA 2A                  271 	ld	a,(hl+)
   00EB 66                  272 	ld	h,(hl)
   00EC 6F                  273 	ld	l,a
   00ED E5                  274 	push	hl
   00EE CDr00r00            275 	call	_SetSpriteAnim
   00F1 E8 05               276 	add	sp, #5
                            277 ;SpritePlayer.c:41: TranslateSprite(THIS, 0, 1 << delta_time);
   00F3 21r00r00            278 	ld	hl,#_delta_time
   00F6 7E                  279 	ld	a,(hl)
   00F7 F5                  280 	push	af
   00F8 06 01               281 	ld	b,#0x01
   00FA F1                  282 	pop	af
   00FB 3C                  283 	inc	a
   00FC 18 02               284 	jr	00215$
   00FE                     285 00214$:
   00FE CB 20               286 	sla	b
   0100                     287 00215$:
   0100 3D                  288 	dec	a
   0101 20 FB               289 	jr	NZ,00214$
   0103 C5                  290 	push	bc
   0104 33                  291 	inc	sp
   0105 AF                  292 	xor	a, a
   0106 F5                  293 	push	af
   0107 33                  294 	inc	sp
   0108 21r00r00            295 	ld	hl,#_THIS
   010B 2A                  296 	ld	a,(hl+)
   010C 66                  297 	ld	h,(hl)
   010D 6F                  298 	ld	l,a
   010E E5                  299 	push	hl
   010F CDr00r00            300 	call	_TranslateSprite
   0112 E8 04               301 	add	sp, #4
   0114                     302 00104$:
                            303 ;SpritePlayer.c:43: if(KEY_PRESSED(J_RIGHT)){
   0114 21r00r00            304 	ld	hl,#_keys
   0117 4E                  305 	ld	c,(hl)
   0118 06 00               306 	ld	b,#0x00
   011A CB 41               307 	bit	0, c
   011C CAr76r01            308 	jp	Z,00106$
                            309 ;SpritePlayer.c:44: THIS->x++;
   011F 21r01r00            310 	ld	hl,#_THIS + 1
   0122 2B                  311 	dec	hl
   0123 4E                  312 	ld	c,(hl)
   0124 23                  313 	inc	hl
   0125 46                  314 	ld	b,(hl)
   0126 21 07 00            315 	ld	hl,#0x0007
   0129 09                  316 	add	hl,bc
   012A 7D                  317 	ld	a,l
   012B 54                  318 	ld	d,h
   012C F8 01               319 	ldhl	sp,#1
   012E 22                  320 	ld	(hl+),a
   012F 72                  321 	ld	(hl),d
   0130 2B                  322 	dec	hl
   0131 5E                  323 	ld	e,(hl)
   0132 23                  324 	inc	hl
   0133 56                  325 	ld	d,(hl)
   0134 1A                  326 	ld	a,(de)
   0135 4F                  327 	ld	c,a
   0136 13                  328 	inc	de
   0137 1A                  329 	ld	a,(de)
   0138 47                  330 	ld	b,a
   0139 03                  331 	inc	bc
   013A 2B                  332 	dec	hl
   013B 2A                  333 	ld	a,(hl+)
   013C 66                  334 	ld	h,(hl)
   013D 6F                  335 	ld	l,a
   013E 71                  336 	ld	(hl),c
   013F 23                  337 	inc	hl
   0140 70                  338 	ld	(hl),b
                            339 ;SpritePlayer.c:45: SetSpriteAnim(THIS, anim_right, 10);
   0141 3E 0A               340 	ld	a,#0x0a
   0143 F5                  341 	push	af
   0144 33                  342 	inc	sp
   0145 21r45r00            343 	ld	hl,#_anim_right
   0148 E5                  344 	push	hl
   0149 21r00r00            345 	ld	hl,#_THIS
   014C 2A                  346 	ld	a,(hl+)
   014D 66                  347 	ld	h,(hl)
   014E 6F                  348 	ld	l,a
   014F E5                  349 	push	hl
   0150 CDr00r00            350 	call	_SetSpriteAnim
   0153 E8 05               351 	add	sp, #5
                            352 ;SpritePlayer.c:46: TranslateSprite(THIS, 1 << delta_time, 0);
   0155 21r00r00            353 	ld	hl,#_delta_time
   0158 7E                  354 	ld	a,(hl)
   0159 F5                  355 	push	af
   015A 06 01               356 	ld	b,#0x01
   015C F1                  357 	pop	af
   015D 3C                  358 	inc	a
   015E 18 02               359 	jr	00218$
   0160                     360 00217$:
   0160 CB 20               361 	sla	b
   0162                     362 00218$:
   0162 3D                  363 	dec	a
   0163 20 FB               364 	jr	NZ,00217$
   0165 AF                  365 	xor	a, a
   0166 F5                  366 	push	af
   0167 33                  367 	inc	sp
   0168 C5                  368 	push	bc
   0169 33                  369 	inc	sp
   016A 21r00r00            370 	ld	hl,#_THIS
   016D 2A                  371 	ld	a,(hl+)
   016E 66                  372 	ld	h,(hl)
   016F 6F                  373 	ld	l,a
   0170 E5                  374 	push	hl
   0171 CDr00r00            375 	call	_TranslateSprite
   0174 E8 04               376 	add	sp, #4
   0176                     377 00106$:
                            378 ;SpritePlayer.c:48: if(KEY_PRESSED(J_LEFT)){
   0176 21r00r00            379 	ld	hl,#_keys
   0179 4E                  380 	ld	c,(hl)
   017A 06 00               381 	ld	b,#0x00
   017C CB 49               382 	bit	1, c
   017E CArD8r01            383 	jp	Z,00108$
                            384 ;SpritePlayer.c:49: THIS->x--;
   0181 21r01r00            385 	ld	hl,#_THIS + 1
   0184 2B                  386 	dec	hl
   0185 4E                  387 	ld	c,(hl)
   0186 23                  388 	inc	hl
   0187 46                  389 	ld	b,(hl)
   0188 21 07 00            390 	ld	hl,#0x0007
   018B 09                  391 	add	hl,bc
   018C 7D                  392 	ld	a,l
   018D 54                  393 	ld	d,h
   018E F8 01               394 	ldhl	sp,#1
   0190 22                  395 	ld	(hl+),a
   0191 72                  396 	ld	(hl),d
   0192 2B                  397 	dec	hl
   0193 5E                  398 	ld	e,(hl)
   0194 23                  399 	inc	hl
   0195 56                  400 	ld	d,(hl)
   0196 1A                  401 	ld	a,(de)
   0197 4F                  402 	ld	c,a
   0198 13                  403 	inc	de
   0199 1A                  404 	ld	a,(de)
   019A 47                  405 	ld	b,a
   019B 0B                  406 	dec	bc
   019C 2B                  407 	dec	hl
   019D 2A                  408 	ld	a,(hl+)
   019E 66                  409 	ld	h,(hl)
   019F 6F                  410 	ld	l,a
   01A0 71                  411 	ld	(hl),c
   01A1 23                  412 	inc	hl
   01A2 70                  413 	ld	(hl),b
                            414 ;SpritePlayer.c:50: SetSpriteAnim(THIS, anim_left, 10);
   01A3 3E 0A               415 	ld	a,#0x0a
   01A5 F5                  416 	push	af
   01A6 33                  417 	inc	sp
   01A7 21r48r00            418 	ld	hl,#_anim_left
   01AA E5                  419 	push	hl
   01AB 21r00r00            420 	ld	hl,#_THIS
   01AE 2A                  421 	ld	a,(hl+)
   01AF 66                  422 	ld	h,(hl)
   01B0 6F                  423 	ld	l,a
   01B1 E5                  424 	push	hl
   01B2 CDr00r00            425 	call	_SetSpriteAnim
   01B5 E8 05               426 	add	sp, #5
                            427 ;SpritePlayer.c:51: TranslateSprite(THIS, -1 << delta_time, 0);
   01B7 21r00r00            428 	ld	hl,#_delta_time
   01BA 7E                  429 	ld	a,(hl)
   01BB F5                  430 	push	af
   01BC 06 FF               431 	ld	b,#0xff
   01BE F1                  432 	pop	af
   01BF 3C                  433 	inc	a
   01C0 18 02               434 	jr	00221$
   01C2                     435 00220$:
   01C2 CB 20               436 	sla	b
   01C4                     437 00221$:
   01C4 3D                  438 	dec	a
   01C5 20 FB               439 	jr	NZ,00220$
   01C7 AF                  440 	xor	a, a
   01C8 F5                  441 	push	af
   01C9 33                  442 	inc	sp
   01CA C5                  443 	push	bc
   01CB 33                  444 	inc	sp
   01CC 21r00r00            445 	ld	hl,#_THIS
   01CF 2A                  446 	ld	a,(hl+)
   01D0 66                  447 	ld	h,(hl)
   01D1 6F                  448 	ld	l,a
   01D2 E5                  449 	push	hl
   01D3 CDr00r00            450 	call	_TranslateSprite
   01D6 E8 04               451 	add	sp, #4
   01D8                     452 00108$:
                            453 ;SpritePlayer.c:53: if(keys == 0){
   01D8 21r00r00            454 	ld	hl,#_keys
   01DB 7E                  455 	ld	a,(hl)
   01DC B7                  456 	or	a, a
   01DD 20 14               457 	jr	NZ,00110$
                            458 ;SpritePlayer.c:54: SetSpriteAnim(THIS, anim_idle, 20);
   01DF 3E 14               459 	ld	a,#0x14
   01E1 F5                  460 	push	af
   01E2 33                  461 	inc	sp
   01E3 21r40r00            462 	ld	hl,#_anim_idle
   01E6 E5                  463 	push	hl
   01E7 21r00r00            464 	ld	hl,#_THIS
   01EA 2A                  465 	ld	a,(hl+)
   01EB 66                  466 	ld	h,(hl)
   01EC 6F                  467 	ld	l,a
   01ED E5                  468 	push	hl
   01EE CDr00r00            469 	call	_SetSpriteAnim
   01F1 E8 05               470 	add	sp, #5
   01F3                     471 00110$:
                            472 ;SpritePlayer.c:56: if (KEY_TICKED(J_A) && have_bomb>0) {
   01F3 21r00r00            473 	ld	hl,#_keys
   01F6 4E                  474 	ld	c,(hl)
   01F7 06 00               475 	ld	b,#0x00
   01F9 CB 61               476 	bit	4, c
   01FB CAr6Er02            477 	jp	Z,00112$
   01FE 21r00r00            478 	ld	hl,#_previous_keys
   0201 4E                  479 	ld	c,(hl)
   0202 06 00               480 	ld	b,#0x00
   0204 CB 61               481 	bit	4, c
   0206 C2r6Er02            482 	jp	NZ,00112$
   0209 21r07r00            483 	ld	hl,#_have_bomb
   020C 3E 00               484 	ld	a,#0x00
   020E 96                  485 	sub	a, (hl)
   020F 23                  486 	inc	hl
   0210 3E 00               487 	ld	a,#0x00
   0212 9E                  488 	sbc	a, (hl)
   0213 3E 00               489 	ld	a,#0x00
   0215 57                  490 	ld	d, a
   0216 5E                  491 	ld	e, (hl)
   0217 CB 7B               492 	bit	7, e
   0219 28 07               493 	jr	Z,00225$
   021B CB 7A               494 	bit	7, d
   021D 20 08               495 	jr	NZ,00226$
   021F BF                  496 	cp	a, a
   0220 18 05               497 	jr	00226$
   0222                     498 00225$:
   0222 CB 7A               499 	bit	7, d
   0224 28 01               500 	jr	Z,00226$
   0226 37                  501 	scf
   0227                     502 00226$:
   0227 D2r6Er02            503 	jp	NC,00112$
                            504 ;SpritePlayer.c:34: THIS->y--;
   022A 21r01r00            505 	ld	hl,#_THIS + 1
   022D 2B                  506 	dec	hl
   022E 4E                  507 	ld	c,(hl)
   022F 23                  508 	inc	hl
   0230 46                  509 	ld	b,(hl)
                            510 ;SpritePlayer.c:57: SpriteManagerAdd(SPRITE_BOMB, THIS->x, THIS->y);
   0231 21 09 00            511 	ld	hl,#0x0009
   0234 09                  512 	add	hl,bc
   0235 7D                  513 	ld	a,l
   0236 54                  514 	ld	d,h
   0237 F8 01               515 	ldhl	sp,#1
   0239 22                  516 	ld	(hl+),a
   023A 72                  517 	ld	(hl),d
   023B 2B                  518 	dec	hl
   023C 5E                  519 	ld	e,(hl)
   023D 23                  520 	inc	hl
   023E 56                  521 	ld	d,(hl)
   023F 1A                  522 	ld	a,(de)
   0240 2B                  523 	dec	hl
   0241 22                  524 	ld	(hl+),a
   0242 13                  525 	inc	de
   0243 1A                  526 	ld	a,(de)
   0244 77                  527 	ld	(hl),a
   0245 21 07 00            528 	ld	hl,#0x0007
   0248 09                  529 	add	hl,bc
   0249 4D                  530 	ld	c,l
   024A 44                  531 	ld	b,h
   024B 59                  532 	ld	e, c
   024C 50                  533 	ld	d, b
   024D 1A                  534 	ld	a,(de)
   024E 4F                  535 	ld	c,a
   024F 13                  536 	inc	de
   0250 1A                  537 	ld	a,(de)
   0251 47                  538 	ld	b,a
   0252 F8 01               539 	ldhl	sp,#1
   0254 2A                  540 	ld	a,(hl+)
   0255 66                  541 	ld	h,(hl)
   0256 6F                  542 	ld	l,a
   0257 E5                  543 	push	hl
   0258 C5                  544 	push	bc
   0259 3E 06               545 	ld	a,#0x06
   025B F5                  546 	push	af
   025C 33                  547 	inc	sp
   025D CDr00r00            548 	call	_SpriteManagerAdd
   0260 E8 05               549 	add	sp, #5
                            550 ;SpritePlayer.c:58: have_bomb--;	
   0262 21r08r00            551 	ld	hl,#_have_bomb + 1
   0265 2B                  552 	dec	hl
   0266 5E                  553 	ld	e,(hl)
   0267 23                  554 	inc	hl
   0268 56                  555 	ld	d,(hl)
   0269 1B                  556 	dec	de
   026A 2B                  557 	dec	hl
   026B 73                  558 	ld	(hl),e
   026C 23                  559 	inc	hl
   026D 72                  560 	ld	(hl),d
   026E                     561 00112$:
                            562 ;SpritePlayer.c:67: SPRITEMANAGER_ITERATE(i, spr) {
   026E FAr01r00            563 	ld	a, (#(_sprite_manager_updatables + 0x0001) + 0)
   0271 4F                  564 	ld	c,a
   0272 06 00               565 	ld	b,#0x00
   0274 CB 21               566 	sla	c
   0276 CB 10               567 	rl	b
   0278 21r00r00            568 	ld	hl,#_sprite_manager_sprites
   027B 09                  569 	add	hl,bc
   027C 4D                  570 	ld	c,l
   027D 44                  571 	ld	b,h
   027E 59                  572 	ld	e, c
   027F 50                  573 	ld	d, b
   0280 1A                  574 	ld	a,(de)
   0281 4F                  575 	ld	c,a
   0282 13                  576 	inc	de
   0283 1A                  577 	ld	a,(de)
   0284 47                  578 	ld	b,a
   0285 F8 00               579 	ldhl	sp,#0
   0287 36 00               580 	ld	(hl),#0x00
   0289                     581 00133$:
   0289 11r00r00            582 	ld	de, #_sprite_manager_updatables + 0
   028C 1A                  583 	ld	a,(de)
   028D F8 01               584 	ldhl	sp,#1
   028F 32                  585 	ld	(hl-),a
   0290 2A                  586 	ld	a,(hl+)
   0291 96                  587 	sub	a, (hl)
   0292 CArE1r03            588 	jp	Z,00135$
                            589 ;SpritePlayer.c:68: if(spr->type == SPRITE_ENEMY) {
   0295 21 10 00            590 	ld	hl,#0x0010
   0298 09                  591 	add	hl,bc
   0299 7D                  592 	ld	a,l
   029A 54                  593 	ld	d,h
   029B F8 01               594 	ldhl	sp,#1
   029D 22                  595 	ld	(hl+),a
   029E 72                  596 	ld	(hl),d
   029F 2B                  597 	dec	hl
   02A0 5E                  598 	ld	e,(hl)
   02A1 23                  599 	inc	hl
   02A2 56                  600 	ld	d,(hl)
   02A3 1A                  601 	ld	a,(de)
   02A4 3D                  602 	dec	a
   02A5 C2rE7r02            603 	jp	NZ,00118$
                            604 ;SpritePlayer.c:69: if(CheckCollision(THIS, spr)) {
   02A8 C5                  605 	push	bc
   02A9 C5                  606 	push	bc
   02AA 21r00r00            607 	ld	hl,#_THIS
   02AD 2A                  608 	ld	a,(hl+)
   02AE 66                  609 	ld	h,(hl)
   02AF 6F                  610 	ld	l,a
   02B0 E5                  611 	push	hl
   02B1 CDr00r00            612 	call	_CheckCollision
   02B4 E8 04               613 	add	sp, #4
   02B6 C1                  614 	pop	bc
   02B7 7B                  615 	ld	a,e
   02B8 B7                  616 	or	a, a
   02B9 28 2C               617 	jr	Z,00118$
                            618 ;SpritePlayer.c:70: SetState(STATE_MENU);
   02BB C5                  619 	push	bc
   02BC AF                  620 	xor	a, a
   02BD F5                  621 	push	af
   02BE 33                  622 	inc	sp
   02BF CDr00r00            623 	call	_SetState
   02C2 33                  624 	inc	sp
   02C3 C1                  625 	pop	bc
                            626 ;SpritePlayer.c:71: PlayFx(CHANNEL_1, 10, 0x4f, 0xc7, 0xf3, 0x73, 0x86);
   02C4 C5                  627 	push	bc
   02C5 21 86 00            628 	ld	hl,#0x0086
   02C8 E5                  629 	push	hl
   02C9 2E 73               630 	ld	l, #0x73
   02CB E5                  631 	push	hl
   02CC 2E F3               632 	ld	l, #0xf3
   02CE E5                  633 	push	hl
   02CF 2E C7               634 	ld	l, #0xc7
   02D1 E5                  635 	push	hl
   02D2 2E 4F               636 	ld	l, #0x4f
   02D4 E5                  637 	push	hl
   02D5 21 00 0A            638 	ld	hl,#0x0a00
   02D8 E5                  639 	push	hl
   02D9 CDr00r00            640 	call	_PlayFx
   02DC E8 0C               641 	add	sp, #12
   02DE C1                  642 	pop	bc
                            643 ;SpritePlayer.c:72: have_bomb = 3;
   02DF 21r07r00            644 	ld	hl,#_have_bomb
   02E2 36 03               645 	ld	(hl),#0x03
   02E4 23                  646 	inc	hl
   02E5 36 00               647 	ld	(hl),#0x00
   02E7                     648 00118$:
                            649 ;SpritePlayer.c:75: if(spr->type == SPRITE_ENEMY2) {
   02E7 F8 01               650 	ldhl	sp,#(2 - 1)
   02E9 5E                  651 	ld	e,(hl)
   02EA 23                  652 	inc	hl
   02EB 56                  653 	ld	d,(hl)
   02EC 1A                  654 	ld	a,(de)
   02ED D6 02               655 	sub	a, #0x02
   02EF C2r31r03            656 	jp	NZ,00122$
                            657 ;SpritePlayer.c:76: if(CheckCollision(THIS, spr)) {
   02F2 C5                  658 	push	bc
   02F3 C5                  659 	push	bc
   02F4 21r00r00            660 	ld	hl,#_THIS
   02F7 2A                  661 	ld	a,(hl+)
   02F8 66                  662 	ld	h,(hl)
   02F9 6F                  663 	ld	l,a
   02FA E5                  664 	push	hl
   02FB CDr00r00            665 	call	_CheckCollision
   02FE E8 04               666 	add	sp, #4
   0300 C1                  667 	pop	bc
   0301 7B                  668 	ld	a,e
   0302 B7                  669 	or	a, a
   0303 28 2C               670 	jr	Z,00122$
                            671 ;SpritePlayer.c:77: SetState(STATE_MENU);
   0305 C5                  672 	push	bc
   0306 AF                  673 	xor	a, a
   0307 F5                  674 	push	af
   0308 33                  675 	inc	sp
   0309 CDr00r00            676 	call	_SetState
   030C 33                  677 	inc	sp
   030D C1                  678 	pop	bc
                            679 ;SpritePlayer.c:78: PlayFx(CHANNEL_1, 10, 0x4f, 0xc7, 0xf3, 0x73, 0x86);
   030E C5                  680 	push	bc
   030F 21 86 00            681 	ld	hl,#0x0086
   0312 E5                  682 	push	hl
   0313 2E 73               683 	ld	l, #0x73
   0315 E5                  684 	push	hl
   0316 2E F3               685 	ld	l, #0xf3
   0318 E5                  686 	push	hl
   0319 2E C7               687 	ld	l, #0xc7
   031B E5                  688 	push	hl
   031C 2E 4F               689 	ld	l, #0x4f
   031E E5                  690 	push	hl
   031F 21 00 0A            691 	ld	hl,#0x0a00
   0322 E5                  692 	push	hl
   0323 CDr00r00            693 	call	_PlayFx
   0326 E8 0C               694 	add	sp, #12
   0328 C1                  695 	pop	bc
                            696 ;SpritePlayer.c:79: have_bomb = 3;
   0329 21r07r00            697 	ld	hl,#_have_bomb
   032C 36 03               698 	ld	(hl),#0x03
   032E 23                  699 	inc	hl
   032F 36 00               700 	ld	(hl),#0x00
   0331                     701 00122$:
                            702 ;SpritePlayer.c:82: if (spr->type == SPRITE_KEY) {
   0331 F8 01               703 	ldhl	sp,#(2 - 1)
   0333 5E                  704 	ld	e,(hl)
   0334 23                  705 	inc	hl
   0335 56                  706 	ld	d,(hl)
   0336 1A                  707 	ld	a,(de)
   0337 D6 03               708 	sub	a, #0x03
   0339 C2r97r03            709 	jp	NZ,00126$
                            710 ;SpritePlayer.c:83: if (CheckCollision(THIS, spr)) {
   033C C5                  711 	push	bc
   033D C5                  712 	push	bc
   033E 21r00r00            713 	ld	hl,#_THIS
   0341 2A                  714 	ld	a,(hl+)
   0342 66                  715 	ld	h,(hl)
   0343 6F                  716 	ld	l,a
   0344 E5                  717 	push	hl
   0345 CDr00r00            718 	call	_CheckCollision
   0348 E8 04               719 	add	sp, #4
   034A C1                  720 	pop	bc
   034B 7B                  721 	ld	a,e
   034C B7                  722 	or	a, a
   034D CAr97r03            723 	jp	Z,00126$
                            724 ;SpritePlayer.c:84: SpriteManagerRemoveSprite(spr);
   0350 C5                  725 	push	bc
   0351 C5                  726 	push	bc
   0352 CDr00r00            727 	call	_SpriteManagerRemoveSprite
   0355 E8 02               728 	add	sp, #2
   0357 C1                  729 	pop	bc
                            730 ;SpritePlayer.c:85: SpriteManagerRemove(2); //need to place door always as 2 sprite
   0358 C5                  731 	push	bc
   0359 21 02 00            732 	ld	hl,#0x0002
   035C E5                  733 	push	hl
   035D CDr00r00            734 	call	_SpriteManagerRemove
   0360 E8 02               735 	add	sp, #2
   0362 C1                  736 	pop	bc
                            737 ;SpritePlayer.c:86: SpriteManagerAdd(SPRITE_DOOROPEN, door_x, door_y);
   0363 C5                  738 	push	bc
   0364 21r03r00            739 	ld	hl,#_door_y
   0367 2A                  740 	ld	a,(hl+)
   0368 66                  741 	ld	h,(hl)
   0369 6F                  742 	ld	l,a
   036A E5                  743 	push	hl
   036B 21r01r00            744 	ld	hl,#_door_x
   036E 2A                  745 	ld	a,(hl+)
   036F 66                  746 	ld	h,(hl)
   0370 6F                  747 	ld	l,a
   0371 E5                  748 	push	hl
   0372 3E 05               749 	ld	a,#0x05
   0374 F5                  750 	push	af
   0375 33                  751 	inc	sp
   0376 CDr00r00            752 	call	_SpriteManagerAdd
   0379 E8 05               753 	add	sp, #5
   037B C1                  754 	pop	bc
                            755 ;SpritePlayer.c:87: PlayFx(CHANNEL_1, 10, 0x4U, 0xFEU, 0xA1U, 0x8FU, 0x86U);
   037C C5                  756 	push	bc
   037D 21 86 00            757 	ld	hl,#0x0086
   0380 E5                  758 	push	hl
   0381 2E 8F               759 	ld	l, #0x8f
   0383 E5                  760 	push	hl
   0384 2E A1               761 	ld	l, #0xa1
   0386 E5                  762 	push	hl
   0387 2E FE               763 	ld	l, #0xfe
   0389 E5                  764 	push	hl
   038A 2E 04               765 	ld	l, #0x04
   038C E5                  766 	push	hl
   038D 21 00 0A            767 	ld	hl,#0x0a00
   0390 E5                  768 	push	hl
   0391 CDr00r00            769 	call	_PlayFx
   0394 E8 0C               770 	add	sp, #12
   0396 C1                  771 	pop	bc
   0397                     772 00126$:
                            773 ;SpritePlayer.c:90: if (spr->type == SPRITE_DOOROPEN) {
   0397 F8 01               774 	ldhl	sp,#(2 - 1)
   0399 5E                  775 	ld	e,(hl)
   039A 23                  776 	inc	hl
   039B 56                  777 	ld	d,(hl)
   039C 1A                  778 	ld	a,(de)
   039D D6 05               779 	sub	a, #0x05
   039F 20 1B               780 	jr	NZ,00134$
                            781 ;SpritePlayer.c:91: if (CheckCollision(THIS, spr)) {
   03A1 C5                  782 	push	bc
   03A2 21r00r00            783 	ld	hl,#_THIS
   03A5 2A                  784 	ld	a,(hl+)
   03A6 66                  785 	ld	h,(hl)
   03A7 6F                  786 	ld	l,a
   03A8 E5                  787 	push	hl
   03A9 CDr00r00            788 	call	_CheckCollision
   03AC E8 04               789 	add	sp, #4
   03AE 7B                  790 	ld	a,e
   03AF B7                  791 	or	a, a
   03B0 28 0A               792 	jr	Z,00134$
                            793 ;SpritePlayer.c:92: SetState(next_lvl);
   03B2 21r05r00            794 	ld	hl,#_next_lvl
   03B5 46                  795 	ld	b,(hl)
   03B6 C5                  796 	push	bc
   03B7 33                  797 	inc	sp
   03B8 CDr00r00            798 	call	_SetState
   03BB 33                  799 	inc	sp
   03BC                     800 00134$:
                            801 ;SpritePlayer.c:67: SPRITEMANAGER_ITERATE(i, spr) {
   03BC F8 00               802 	ldhl	sp,#0
   03BE 34                  803 	inc	(hl)
   03BF 4E                  804 	ld	c,(hl)
   03C0 06 00               805 	ld	b,#0x00
   03C2 03                  806 	inc	bc
   03C3 21r00r00            807 	ld	hl,#_sprite_manager_updatables
   03C6 09                  808 	add	hl,bc
   03C7 4D                  809 	ld	c,l
   03C8 44                  810 	ld	b,h
   03C9 0A                  811 	ld	a,(bc)
   03CA 4F                  812 	ld	c,a
   03CB 06 00               813 	ld	b,#0x00
   03CD CB 21               814 	sla	c
   03CF CB 10               815 	rl	b
   03D1 21r00r00            816 	ld	hl,#_sprite_manager_sprites
   03D4 09                  817 	add	hl,bc
   03D5 4D                  818 	ld	c,l
   03D6 44                  819 	ld	b,h
   03D7 59                  820 	ld	e, c
   03D8 50                  821 	ld	d, b
   03D9 1A                  822 	ld	a,(de)
   03DA 4F                  823 	ld	c,a
   03DB 13                  824 	inc	de
   03DC 1A                  825 	ld	a,(de)
   03DD 47                  826 	ld	b,a
   03DE C3r89r02            827 	jp	00133$
   03E1                     828 00135$:
   03E1 E8 03               829 	add	sp, #3
   03E3 C9                  830 	ret
                            831 ;SpritePlayer.c:98: void Destroy_SPRITE_PLAYER() {
                            832 ;	---------------------------------
                            833 ; Function Destroy_SPRITE_PLAYER
                            834 ; ---------------------------------
   03E4                     835 _Destroy_SPRITE_PLAYER::
                            836 ;SpritePlayer.c:99: }
   03E4 C9                  837 	ret
                            838 	.area _CODE_2
                            839 	.area _CABS (ABS)
