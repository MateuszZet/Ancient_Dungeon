                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.6.0 #9615 (MINGW64)
                              4 ;--------------------------------------------------------
                              5 	.module SpritePlayer
                              6 	.optsdcc -mgbz80
                              7 	
                              8 ;--------------------------------------------------------
                              9 ; Public variables in this module
                             10 ;--------------------------------------------------------
                             11 	.globl _PlayFx
                             12 	.globl _SpriteManagerRemoveSprite
                             13 	.globl _SpriteManagerRemove
                             14 	.globl _SpriteManagerAdd
                             15 	.globl _SetState
                             16 	.globl _CheckCollision
                             17 	.globl _TranslateSprite
                             18 	.globl _SetSpriteAnim
                             19 	.globl _have_bomb
                             20 	.globl _next_lvl
                             21 	.globl _door_y
                             22 	.globl _door_x
                             23 	.globl _bank_SPRITE_PLAYER
                             24 	.globl _anim_up
                             25 	.globl _anim_left
                             26 	.globl _anim_right
                             27 	.globl _anim_down
                             28 	.globl _anim_idle
                             29 	.globl _Start_SPRITE_PLAYER
                             30 	.globl _Update_SPRITE_PLAYER
                             31 	.globl _Destroy_SPRITE_PLAYER
                             32 ;--------------------------------------------------------
                             33 ; ram data
                             34 ;--------------------------------------------------------
                             35 	.area _DATA
   0000                      36 _bank_SPRITE_PLAYER::
   0000                      37 	.ds 1
   0001                      38 _door_x::
   0001                      39 	.ds 2
   0003                      40 _door_y::
   0003                      41 	.ds 2
   0005                      42 _next_lvl::
   0005                      43 	.ds 2
   0007                      44 _have_bomb::
   0007                      45 	.ds 2
                             46 ;--------------------------------------------------------
                             47 ; absolute external ram data
                             48 ;--------------------------------------------------------
                             49 	.area _DABS (ABS)
                             50 ;--------------------------------------------------------
                             51 ; global & static initialisations
                             52 ;--------------------------------------------------------
                             53 	.area _HOME
                             54 	.area _GSINIT
                             55 	.area _GSFINAL
                             56 	.area _GSINIT
                             57 ;SpritePlayer.c:14: UINT8 bank_SPRITE_PLAYER = 2;
   0000 21r00r00             58 	ld	hl,#_bank_SPRITE_PLAYER
   0003 36 02                59 	ld	(hl),#0x02
                             60 ;SpritePlayer.c:19: int have_bomb=3;
   0005 21r07r00             61 	ld	hl,#_have_bomb
   0008 36 03                62 	ld	(hl),#0x03
   000A 23                   63 	inc	hl
   000B 36 00                64 	ld	(hl),#0x00
                             65 ;--------------------------------------------------------
                             66 ; Home
                             67 ;--------------------------------------------------------
                             68 	.area _HOME
                             69 	.area _HOME
                             70 ;--------------------------------------------------------
                             71 ; code
                             72 ;--------------------------------------------------------
                             73 	.area _CODE_2
                             74 ;SpritePlayer.c:21: void Start_SPRITE_PLAYER() {
                             75 ;	---------------------------------
                             76 ; Function Start_SPRITE_PLAYER
                             77 ; ---------------------------------
   0000                      78 _Start_SPRITE_PLAYER::
                             79 ;SpritePlayer.c:22: THIS->coll_x = 1;
   0000 21r01r00             80 	ld	hl,#_THIS + 1
   0003 2B                   81 	dec	hl
   0004 4E                   82 	ld	c,(hl)
   0005 23                   83 	inc	hl
   0006 46                   84 	ld	b,(hl)
   0007 21 0C 00             85 	ld	hl,#0x000c
   000A 09                   86 	add	hl,bc
   000B 4D                   87 	ld	c,l
   000C 44                   88 	ld	b,h
   000D 3E 01                89 	ld	a,#0x01
   000F 02                   90 	ld	(bc),a
                             91 ;SpritePlayer.c:23: THIS->coll_y = 0;
   0010 21r01r00             92 	ld	hl,#_THIS + 1
   0013 2B                   93 	dec	hl
   0014 4E                   94 	ld	c,(hl)
   0015 23                   95 	inc	hl
   0016 46                   96 	ld	b,(hl)
   0017 21 0D 00             97 	ld	hl,#0x000d
   001A 09                   98 	add	hl,bc
   001B 4D                   99 	ld	c,l
   001C 44                  100 	ld	b,h
   001D AF                  101 	xor	a, a
   001E 02                  102 	ld	(bc),a
                            103 ;SpritePlayer.c:24: THIS->coll_w = 13;
   001F 21r01r00            104 	ld	hl,#_THIS + 1
   0022 2B                  105 	dec	hl
   0023 4E                  106 	ld	c,(hl)
   0024 23                  107 	inc	hl
   0025 46                  108 	ld	b,(hl)
   0026 21 0E 00            109 	ld	hl,#0x000e
   0029 09                  110 	add	hl,bc
   002A 4D                  111 	ld	c,l
   002B 44                  112 	ld	b,h
   002C 3E 0D               113 	ld	a,#0x0d
   002E 02                  114 	ld	(bc),a
                            115 ;SpritePlayer.c:25: THIS->coll_h = 16;
   002F 21r01r00            116 	ld	hl,#_THIS + 1
   0032 2B                  117 	dec	hl
   0033 4E                  118 	ld	c,(hl)
   0034 23                  119 	inc	hl
   0035 46                  120 	ld	b,(hl)
   0036 21 0F 00            121 	ld	hl,#0x000f
   0039 09                  122 	add	hl,bc
   003A 4D                  123 	ld	c,l
   003B 44                  124 	ld	b,h
   003C 3E 10               125 	ld	a,#0x10
   003E 02                  126 	ld	(bc),a
   003F C9                  127 	ret
   0040                     128 _anim_idle:
   0040 01                  129 	.db #0x01	; 1
   0041 00                  130 	.db #0x00	; 0
   0042                     131 _anim_down:
   0042 02                  132 	.db #0x02	; 2
   0043 01                  133 	.db #0x01	; 1
   0044 02                  134 	.db #0x02	; 2
   0045                     135 _anim_right:
   0045 02                  136 	.db #0x02	; 2
   0046 03                  137 	.db #0x03	; 3
   0047 04                  138 	.db #0x04	; 4
   0048                     139 _anim_left:
   0048 02                  140 	.db #0x02	; 2
   0049 05                  141 	.db #0x05	; 5
   004A 06                  142 	.db #0x06	; 6
   004B                     143 _anim_up:
   004B 02                  144 	.db #0x02	; 2
   004C 07                  145 	.db #0x07	; 7
   004D 08                  146 	.db #0x08	; 8
                            147 ;SpritePlayer.c:28: void Update_SPRITE_PLAYER() {
                            148 ;	---------------------------------
                            149 ; Function Update_SPRITE_PLAYER
                            150 ; ---------------------------------
   004E                     151 _Update_SPRITE_PLAYER::
   004E E8 FB               152 	add	sp, #-5
                            153 ;SpritePlayer.c:33: if(KEY_PRESSED(J_UP)){
   0050 21r00r00            154 	ld	hl,#_keys
   0053 4E                  155 	ld	c,(hl)
   0054 06 00               156 	ld	b,#0x00
   0056 CB 51               157 	bit	2, c
   0058 CArB2r00            158 	jp	Z,00102$
                            159 ;SpritePlayer.c:34: THIS->y--;
   005B 21r01r00            160 	ld	hl,#_THIS + 1
   005E 2B                  161 	dec	hl
   005F 4E                  162 	ld	c,(hl)
   0060 23                  163 	inc	hl
   0061 46                  164 	ld	b,(hl)
   0062 21 09 00            165 	ld	hl,#0x0009
   0065 09                  166 	add	hl,bc
   0066 7D                  167 	ld	a,l
   0067 54                  168 	ld	d,h
   0068 F8 03               169 	ldhl	sp,#3
   006A 22                  170 	ld	(hl+),a
   006B 72                  171 	ld	(hl),d
   006C 2B                  172 	dec	hl
   006D 5E                  173 	ld	e,(hl)
   006E 23                  174 	inc	hl
   006F 56                  175 	ld	d,(hl)
   0070 1A                  176 	ld	a,(de)
   0071 4F                  177 	ld	c,a
   0072 13                  178 	inc	de
   0073 1A                  179 	ld	a,(de)
   0074 47                  180 	ld	b,a
   0075 0B                  181 	dec	bc
   0076 2B                  182 	dec	hl
   0077 2A                  183 	ld	a,(hl+)
   0078 66                  184 	ld	h,(hl)
   0079 6F                  185 	ld	l,a
   007A 71                  186 	ld	(hl),c
   007B 23                  187 	inc	hl
   007C 70                  188 	ld	(hl),b
                            189 ;SpritePlayer.c:35: SetSpriteAnim(THIS, anim_up, 10);
   007D 3E 0A               190 	ld	a,#0x0a
   007F F5                  191 	push	af
   0080 33                  192 	inc	sp
   0081 21r4Br00            193 	ld	hl,#_anim_up
   0084 E5                  194 	push	hl
   0085 21r00r00            195 	ld	hl,#_THIS
   0088 2A                  196 	ld	a,(hl+)
   0089 66                  197 	ld	h,(hl)
   008A 6F                  198 	ld	l,a
   008B E5                  199 	push	hl
   008C CDr00r00            200 	call	_SetSpriteAnim
   008F E8 05               201 	add	sp, #5
                            202 ;SpritePlayer.c:36: TranslateSprite(THIS, 0, -1 << delta_time);
   0091 21r00r00            203 	ld	hl,#_delta_time
   0094 7E                  204 	ld	a,(hl)
   0095 F5                  205 	push	af
   0096 06 FF               206 	ld	b,#0xff
   0098 F1                  207 	pop	af
   0099 3C                  208 	inc	a
   009A 18 02               209 	jr	00224$
   009C                     210 00223$:
   009C CB 20               211 	sla	b
   009E                     212 00224$:
   009E 3D                  213 	dec	a
   009F 20 FB               214 	jr	NZ,00223$
   00A1 C5                  215 	push	bc
   00A2 33                  216 	inc	sp
   00A3 AF                  217 	xor	a, a
   00A4 F5                  218 	push	af
   00A5 33                  219 	inc	sp
   00A6 21r00r00            220 	ld	hl,#_THIS
   00A9 2A                  221 	ld	a,(hl+)
   00AA 66                  222 	ld	h,(hl)
   00AB 6F                  223 	ld	l,a
   00AC E5                  224 	push	hl
   00AD CDr00r00            225 	call	_TranslateSprite
   00B0 E8 04               226 	add	sp, #4
   00B2                     227 00102$:
                            228 ;SpritePlayer.c:38: if(KEY_PRESSED(J_DOWN)){
   00B2 21r00r00            229 	ld	hl,#_keys
   00B5 4E                  230 	ld	c,(hl)
   00B6 06 00               231 	ld	b,#0x00
   00B8 CB 59               232 	bit	3, c
   00BA CAr14r01            233 	jp	Z,00104$
                            234 ;SpritePlayer.c:39: THIS->y++;
   00BD 21r01r00            235 	ld	hl,#_THIS + 1
   00C0 2B                  236 	dec	hl
   00C1 4E                  237 	ld	c,(hl)
   00C2 23                  238 	inc	hl
   00C3 46                  239 	ld	b,(hl)
   00C4 21 09 00            240 	ld	hl,#0x0009
   00C7 09                  241 	add	hl,bc
   00C8 7D                  242 	ld	a,l
   00C9 54                  243 	ld	d,h
   00CA F8 03               244 	ldhl	sp,#3
   00CC 22                  245 	ld	(hl+),a
   00CD 72                  246 	ld	(hl),d
   00CE 2B                  247 	dec	hl
   00CF 5E                  248 	ld	e,(hl)
   00D0 23                  249 	inc	hl
   00D1 56                  250 	ld	d,(hl)
   00D2 1A                  251 	ld	a,(de)
   00D3 4F                  252 	ld	c,a
   00D4 13                  253 	inc	de
   00D5 1A                  254 	ld	a,(de)
   00D6 47                  255 	ld	b,a
   00D7 03                  256 	inc	bc
   00D8 2B                  257 	dec	hl
   00D9 2A                  258 	ld	a,(hl+)
   00DA 66                  259 	ld	h,(hl)
   00DB 6F                  260 	ld	l,a
   00DC 71                  261 	ld	(hl),c
   00DD 23                  262 	inc	hl
   00DE 70                  263 	ld	(hl),b
                            264 ;SpritePlayer.c:40: SetSpriteAnim(THIS, anim_down, 10);
   00DF 3E 0A               265 	ld	a,#0x0a
   00E1 F5                  266 	push	af
   00E2 33                  267 	inc	sp
   00E3 21r42r00            268 	ld	hl,#_anim_down
   00E6 E5                  269 	push	hl
   00E7 21r00r00            270 	ld	hl,#_THIS
   00EA 2A                  271 	ld	a,(hl+)
   00EB 66                  272 	ld	h,(hl)
   00EC 6F                  273 	ld	l,a
   00ED E5                  274 	push	hl
   00EE CDr00r00            275 	call	_SetSpriteAnim
   00F1 E8 05               276 	add	sp, #5
                            277 ;SpritePlayer.c:41: TranslateSprite(THIS, 0, 1 << delta_time);
   00F3 21r00r00            278 	ld	hl,#_delta_time
   00F6 7E                  279 	ld	a,(hl)
   00F7 F5                  280 	push	af
   00F8 06 01               281 	ld	b,#0x01
   00FA F1                  282 	pop	af
   00FB 3C                  283 	inc	a
   00FC 18 02               284 	jr	00227$
   00FE                     285 00226$:
   00FE CB 20               286 	sla	b
   0100                     287 00227$:
   0100 3D                  288 	dec	a
   0101 20 FB               289 	jr	NZ,00226$
   0103 C5                  290 	push	bc
   0104 33                  291 	inc	sp
   0105 AF                  292 	xor	a, a
   0106 F5                  293 	push	af
   0107 33                  294 	inc	sp
   0108 21r00r00            295 	ld	hl,#_THIS
   010B 2A                  296 	ld	a,(hl+)
   010C 66                  297 	ld	h,(hl)
   010D 6F                  298 	ld	l,a
   010E E5                  299 	push	hl
   010F CDr00r00            300 	call	_TranslateSprite
   0112 E8 04               301 	add	sp, #4
   0114                     302 00104$:
                            303 ;SpritePlayer.c:43: if(KEY_PRESSED(J_RIGHT)){
   0114 21r00r00            304 	ld	hl,#_keys
   0117 4E                  305 	ld	c,(hl)
   0118 06 00               306 	ld	b,#0x00
   011A CB 41               307 	bit	0, c
   011C CAr87r01            308 	jp	Z,00106$
                            309 ;SpritePlayer.c:44: THIS->x++;
   011F 21r01r00            310 	ld	hl,#_THIS + 1
   0122 2B                  311 	dec	hl
   0123 4E                  312 	ld	c,(hl)
   0124 23                  313 	inc	hl
   0125 46                  314 	ld	b,(hl)
   0126 21 07 00            315 	ld	hl,#0x0007
   0129 09                  316 	add	hl,bc
   012A 7D                  317 	ld	a,l
   012B 54                  318 	ld	d,h
   012C F8 03               319 	ldhl	sp,#3
   012E 22                  320 	ld	(hl+),a
   012F 72                  321 	ld	(hl),d
   0130 2B                  322 	dec	hl
   0131 5E                  323 	ld	e,(hl)
   0132 23                  324 	inc	hl
   0133 56                  325 	ld	d,(hl)
   0134 1A                  326 	ld	a,(de)
   0135 4F                  327 	ld	c,a
   0136 13                  328 	inc	de
   0137 1A                  329 	ld	a,(de)
   0138 47                  330 	ld	b,a
   0139 03                  331 	inc	bc
   013A 2B                  332 	dec	hl
   013B 2A                  333 	ld	a,(hl+)
   013C 66                  334 	ld	h,(hl)
   013D 6F                  335 	ld	l,a
   013E 71                  336 	ld	(hl),c
   013F 23                  337 	inc	hl
   0140 70                  338 	ld	(hl),b
                            339 ;SpritePlayer.c:45: SetSpriteAnim(THIS, anim_right, 10);
   0141 3E 0A               340 	ld	a,#0x0a
   0143 F5                  341 	push	af
   0144 33                  342 	inc	sp
   0145 21r45r00            343 	ld	hl,#_anim_right
   0148 E5                  344 	push	hl
   0149 21r00r00            345 	ld	hl,#_THIS
   014C 2A                  346 	ld	a,(hl+)
   014D 66                  347 	ld	h,(hl)
   014E 6F                  348 	ld	l,a
   014F E5                  349 	push	hl
   0150 CDr00r00            350 	call	_SetSpriteAnim
   0153 E8 05               351 	add	sp, #5
                            352 ;SpritePlayer.c:46: TranslateSprite(THIS, 1 << delta_time, 0);
   0155 21r00r00            353 	ld	hl,#_delta_time
   0158 7E                  354 	ld	a,(hl)
   0159 F5                  355 	push	af
   015A 06 01               356 	ld	b,#0x01
   015C F1                  357 	pop	af
   015D 3C                  358 	inc	a
   015E 18 02               359 	jr	00230$
   0160                     360 00229$:
   0160 CB 20               361 	sla	b
   0162                     362 00230$:
   0162 3D                  363 	dec	a
   0163 20 FB               364 	jr	NZ,00229$
   0165 AF                  365 	xor	a, a
   0166 F5                  366 	push	af
   0167 33                  367 	inc	sp
   0168 C5                  368 	push	bc
   0169 33                  369 	inc	sp
   016A 21r00r00            370 	ld	hl,#_THIS
   016D 2A                  371 	ld	a,(hl+)
   016E 66                  372 	ld	h,(hl)
   016F 6F                  373 	ld	l,a
   0170 E5                  374 	push	hl
   0171 CDr00r00            375 	call	_TranslateSprite
   0174 E8 04               376 	add	sp, #4
                            377 ;SpritePlayer.c:34: THIS->y--;
   0176 21r01r00            378 	ld	hl,#_THIS + 1
   0179 2B                  379 	dec	hl
   017A 4E                  380 	ld	c,(hl)
   017B 23                  381 	inc	hl
   017C 46                  382 	ld	b,(hl)
                            383 ;SpritePlayer.c:47: SPRITE_UNSET_VMIRROR(THIS);
   017D 21 0B 00            384 	ld	hl,#0x000b
   0180 09                  385 	add	hl,bc
   0181 4D                  386 	ld	c,l
   0182 44                  387 	ld	b,h
   0183 0A                  388 	ld	a,(bc)
   0184 E6 DF               389 	and	a, #0xdf
   0186 02                  390 	ld	(bc),a
   0187                     391 00106$:
                            392 ;SpritePlayer.c:50: if(KEY_PRESSED(J_LEFT)){
   0187 21r00r00            393 	ld	hl,#_keys
   018A 4E                  394 	ld	c,(hl)
   018B 06 00               395 	ld	b,#0x00
   018D CB 49               396 	bit	1, c
   018F CArE9r01            397 	jp	Z,00108$
                            398 ;SpritePlayer.c:51: THIS->x--;
   0192 21r01r00            399 	ld	hl,#_THIS + 1
   0195 2B                  400 	dec	hl
   0196 4E                  401 	ld	c,(hl)
   0197 23                  402 	inc	hl
   0198 46                  403 	ld	b,(hl)
   0199 21 07 00            404 	ld	hl,#0x0007
   019C 09                  405 	add	hl,bc
   019D 7D                  406 	ld	a,l
   019E 54                  407 	ld	d,h
   019F F8 03               408 	ldhl	sp,#3
   01A1 22                  409 	ld	(hl+),a
   01A2 72                  410 	ld	(hl),d
   01A3 2B                  411 	dec	hl
   01A4 5E                  412 	ld	e,(hl)
   01A5 23                  413 	inc	hl
   01A6 56                  414 	ld	d,(hl)
   01A7 1A                  415 	ld	a,(de)
   01A8 4F                  416 	ld	c,a
   01A9 13                  417 	inc	de
   01AA 1A                  418 	ld	a,(de)
   01AB 47                  419 	ld	b,a
   01AC 0B                  420 	dec	bc
   01AD 2B                  421 	dec	hl
   01AE 2A                  422 	ld	a,(hl+)
   01AF 66                  423 	ld	h,(hl)
   01B0 6F                  424 	ld	l,a
   01B1 71                  425 	ld	(hl),c
   01B2 23                  426 	inc	hl
   01B3 70                  427 	ld	(hl),b
                            428 ;SpritePlayer.c:52: SetSpriteAnim(THIS, anim_left, 10);
   01B4 3E 0A               429 	ld	a,#0x0a
   01B6 F5                  430 	push	af
   01B7 33                  431 	inc	sp
   01B8 21r48r00            432 	ld	hl,#_anim_left
   01BB E5                  433 	push	hl
   01BC 21r00r00            434 	ld	hl,#_THIS
   01BF 2A                  435 	ld	a,(hl+)
   01C0 66                  436 	ld	h,(hl)
   01C1 6F                  437 	ld	l,a
   01C2 E5                  438 	push	hl
   01C3 CDr00r00            439 	call	_SetSpriteAnim
   01C6 E8 05               440 	add	sp, #5
                            441 ;SpritePlayer.c:53: TranslateSprite(THIS, -1 << delta_time, 0);
   01C8 21r00r00            442 	ld	hl,#_delta_time
   01CB 7E                  443 	ld	a,(hl)
   01CC F5                  444 	push	af
   01CD 06 FF               445 	ld	b,#0xff
   01CF F1                  446 	pop	af
   01D0 3C                  447 	inc	a
   01D1 18 02               448 	jr	00233$
   01D3                     449 00232$:
   01D3 CB 20               450 	sla	b
   01D5                     451 00233$:
   01D5 3D                  452 	dec	a
   01D6 20 FB               453 	jr	NZ,00232$
   01D8 AF                  454 	xor	a, a
   01D9 F5                  455 	push	af
   01DA 33                  456 	inc	sp
   01DB C5                  457 	push	bc
   01DC 33                  458 	inc	sp
   01DD 21r00r00            459 	ld	hl,#_THIS
   01E0 2A                  460 	ld	a,(hl+)
   01E1 66                  461 	ld	h,(hl)
   01E2 6F                  462 	ld	l,a
   01E3 E5                  463 	push	hl
   01E4 CDr00r00            464 	call	_TranslateSprite
   01E7 E8 04               465 	add	sp, #4
   01E9                     466 00108$:
                            467 ;SpritePlayer.c:56: if(keys == 0){
   01E9 21r00r00            468 	ld	hl,#_keys
   01EC 7E                  469 	ld	a,(hl)
   01ED B7                  470 	or	a, a
   01EE 20 14               471 	jr	NZ,00110$
                            472 ;SpritePlayer.c:57: SetSpriteAnim(THIS, anim_idle, 20);
   01F0 3E 14               473 	ld	a,#0x14
   01F2 F5                  474 	push	af
   01F3 33                  475 	inc	sp
   01F4 21r40r00            476 	ld	hl,#_anim_idle
   01F7 E5                  477 	push	hl
   01F8 21r00r00            478 	ld	hl,#_THIS
   01FB 2A                  479 	ld	a,(hl+)
   01FC 66                  480 	ld	h,(hl)
   01FD 6F                  481 	ld	l,a
   01FE E5                  482 	push	hl
   01FF CDr00r00            483 	call	_SetSpriteAnim
   0202 E8 05               484 	add	sp, #5
   0204                     485 00110$:
                            486 ;SpritePlayer.c:59: if (KEY_TICKED(J_A) && have_bomb>0) {
   0204 21r00r00            487 	ld	hl,#_keys
   0207 4E                  488 	ld	c,(hl)
   0208 06 00               489 	ld	b,#0x00
   020A CB 61               490 	bit	4, c
   020C CAr85r02            491 	jp	Z,00112$
   020F 21r00r00            492 	ld	hl,#_previous_keys
   0212 4E                  493 	ld	c,(hl)
   0213 06 00               494 	ld	b,#0x00
   0215 CB 61               495 	bit	4, c
   0217 C2r85r02            496 	jp	NZ,00112$
   021A 21r07r00            497 	ld	hl,#_have_bomb
   021D 3E 00               498 	ld	a,#0x00
   021F 96                  499 	sub	a, (hl)
   0220 23                  500 	inc	hl
   0221 3E 00               501 	ld	a,#0x00
   0223 9E                  502 	sbc	a, (hl)
   0224 3E 00               503 	ld	a,#0x00
   0226 57                  504 	ld	d, a
   0227 5E                  505 	ld	e, (hl)
   0228 CB 7B               506 	bit	7, e
   022A 28 07               507 	jr	Z,00237$
   022C CB 7A               508 	bit	7, d
   022E 20 08               509 	jr	NZ,00238$
   0230 BF                  510 	cp	a, a
   0231 18 05               511 	jr	00238$
   0233                     512 00237$:
   0233 CB 7A               513 	bit	7, d
   0235 28 01               514 	jr	Z,00238$
   0237 37                  515 	scf
   0238                     516 00238$:
   0238 D2r85r02            517 	jp	NC,00112$
                            518 ;SpritePlayer.c:34: THIS->y--;
   023B 21r01r00            519 	ld	hl,#_THIS + 1
   023E 2B                  520 	dec	hl
   023F 4E                  521 	ld	c,(hl)
   0240 23                  522 	inc	hl
   0241 46                  523 	ld	b,(hl)
                            524 ;SpritePlayer.c:60: SpriteManagerAdd(SPRITE_BOMB, THIS->x+15, THIS->y);
   0242 21 09 00            525 	ld	hl,#0x0009
   0245 09                  526 	add	hl,bc
   0246 7D                  527 	ld	a,l
   0247 54                  528 	ld	d,h
   0248 F8 03               529 	ldhl	sp,#3
   024A 22                  530 	ld	(hl+),a
   024B 72                  531 	ld	(hl),d
   024C 2B                  532 	dec	hl
   024D 5E                  533 	ld	e,(hl)
   024E 23                  534 	inc	hl
   024F 56                  535 	ld	d,(hl)
   0250 1A                  536 	ld	a,(de)
   0251 2B                  537 	dec	hl
   0252 22                  538 	ld	(hl+),a
   0253 13                  539 	inc	de
   0254 1A                  540 	ld	a,(de)
   0255 77                  541 	ld	(hl),a
   0256 21 07 00            542 	ld	hl,#0x0007
   0259 09                  543 	add	hl,bc
   025A 4D                  544 	ld	c,l
   025B 44                  545 	ld	b,h
   025C 59                  546 	ld	e, c
   025D 50                  547 	ld	d, b
   025E 1A                  548 	ld	a,(de)
   025F 4F                  549 	ld	c,a
   0260 13                  550 	inc	de
   0261 1A                  551 	ld	a,(de)
   0262 47                  552 	ld	b,a
   0263 21 0F 00            553 	ld	hl,#0x000f
   0266 09                  554 	add	hl,bc
   0267 4D                  555 	ld	c,l
   0268 44                  556 	ld	b,h
   0269 F8 03               557 	ldhl	sp,#3
   026B 2A                  558 	ld	a,(hl+)
   026C 66                  559 	ld	h,(hl)
   026D 6F                  560 	ld	l,a
   026E E5                  561 	push	hl
   026F C5                  562 	push	bc
   0270 3E 06               563 	ld	a,#0x06
   0272 F5                  564 	push	af
   0273 33                  565 	inc	sp
   0274 CDr00r00            566 	call	_SpriteManagerAdd
   0277 E8 05               567 	add	sp, #5
                            568 ;SpritePlayer.c:61: have_bomb--;	
   0279 21r08r00            569 	ld	hl,#_have_bomb + 1
   027C 2B                  570 	dec	hl
   027D 5E                  571 	ld	e,(hl)
   027E 23                  572 	inc	hl
   027F 56                  573 	ld	d,(hl)
   0280 1B                  574 	dec	de
   0281 2B                  575 	dec	hl
   0282 73                  576 	ld	(hl),e
   0283 23                  577 	inc	hl
   0284 72                  578 	ld	(hl),d
   0285                     579 00112$:
                            580 ;SpritePlayer.c:70: SPRITEMANAGER_ITERATE(i, spr) {
   0285 FAr01r00            581 	ld	a, (#(_sprite_manager_updatables + 0x0001) + 0)
   0288 4F                  582 	ld	c,a
   0289 06 00               583 	ld	b,#0x00
   028B CB 21               584 	sla	c
   028D CB 10               585 	rl	b
   028F 21r00r00            586 	ld	hl,#_sprite_manager_sprites
   0292 09                  587 	add	hl,bc
   0293 4D                  588 	ld	c,l
   0294 44                  589 	ld	b,h
   0295 59                  590 	ld	e, c
   0296 50                  591 	ld	d, b
   0297 1A                  592 	ld	a,(de)
   0298 F8 00               593 	ldhl	sp,#0
   029A 22                  594 	ld	(hl+),a
   029B 13                  595 	inc	de
   029C 1A                  596 	ld	a,(de)
   029D 22                  597 	ld	(hl+),a
   029E 36 00               598 	ld	(hl),#0x00
   02A0                     599 00137$:
   02A0 11r00r00            600 	ld	de, #_sprite_manager_updatables + 0
   02A3 1A                  601 	ld	a,(de)
   02A4 4F                  602 	ld	c,a
   02A5 F8 02               603 	ldhl	sp,#2
   02A7 7E                  604 	ld	a,(hl)
   02A8 91                  605 	sub	a, c
   02A9 CAr40r04            606 	jp	Z,00139$
                            607 ;SpritePlayer.c:71: if(spr->type == SPRITE_ENEMY) {
   02AC D1                  608 	pop	de
   02AD D5                  609 	push	de
   02AE 21 10 00            610 	ld	hl,#0x0010
   02B1 19                  611 	add	hl,de
   02B2 4D                  612 	ld	c,l
   02B3 44                  613 	ld	b,h
   02B4 0A                  614 	ld	a,(bc)
   02B5 3D                  615 	dec	a
   02B6 C2rFCr02            616 	jp	NZ,00118$
                            617 ;SpritePlayer.c:72: if(CheckCollision(THIS, spr)) {
   02B9 C5                  618 	push	bc
   02BA D1                  619 	pop	de
   02BB E1                  620 	pop	hl
   02BC E5                  621 	push	hl
   02BD D5                  622 	push	de
   02BE E5                  623 	push	hl
   02BF 21r00r00            624 	ld	hl,#_THIS
   02C2 2A                  625 	ld	a,(hl+)
   02C3 66                  626 	ld	h,(hl)
   02C4 6F                  627 	ld	l,a
   02C5 E5                  628 	push	hl
   02C6 CDr00r00            629 	call	_CheckCollision
   02C9 E8 04               630 	add	sp, #4
   02CB C1                  631 	pop	bc
   02CC 7B                  632 	ld	a,e
   02CD B7                  633 	or	a, a
   02CE 28 2C               634 	jr	Z,00118$
                            635 ;SpritePlayer.c:73: SetState(STATE_MENU);
   02D0 C5                  636 	push	bc
   02D1 AF                  637 	xor	a, a
   02D2 F5                  638 	push	af
   02D3 33                  639 	inc	sp
   02D4 CDr00r00            640 	call	_SetState
   02D7 33                  641 	inc	sp
   02D8 C1                  642 	pop	bc
                            643 ;SpritePlayer.c:74: PlayFx(CHANNEL_1, 10, 0x4f, 0xc7, 0xf3, 0x73, 0x86);
   02D9 C5                  644 	push	bc
   02DA 21 86 00            645 	ld	hl,#0x0086
   02DD E5                  646 	push	hl
   02DE 2E 73               647 	ld	l, #0x73
   02E0 E5                  648 	push	hl
   02E1 2E F3               649 	ld	l, #0xf3
   02E3 E5                  650 	push	hl
   02E4 2E C7               651 	ld	l, #0xc7
   02E6 E5                  652 	push	hl
   02E7 2E 4F               653 	ld	l, #0x4f
   02E9 E5                  654 	push	hl
   02EA 21 00 0A            655 	ld	hl,#0x0a00
   02ED E5                  656 	push	hl
   02EE CDr00r00            657 	call	_PlayFx
   02F1 E8 0C               658 	add	sp, #12
   02F3 C1                  659 	pop	bc
                            660 ;SpritePlayer.c:75: have_bomb = 3;
   02F4 21r07r00            661 	ld	hl,#_have_bomb
   02F7 36 03               662 	ld	(hl),#0x03
   02F9 23                  663 	inc	hl
   02FA 36 00               664 	ld	(hl),#0x00
   02FC                     665 00118$:
                            666 ;SpritePlayer.c:78: if(spr->type == SPRITE_ENEMY2) {
   02FC 0A                  667 	ld	a,(bc)
   02FD D6 02               668 	sub	a, #0x02
   02FF C2r45r03            669 	jp	NZ,00122$
                            670 ;SpritePlayer.c:79: if(CheckCollision(THIS, spr)) {
   0302 C5                  671 	push	bc
   0303 D1                  672 	pop	de
   0304 E1                  673 	pop	hl
   0305 E5                  674 	push	hl
   0306 D5                  675 	push	de
   0307 E5                  676 	push	hl
   0308 21r00r00            677 	ld	hl,#_THIS
   030B 2A                  678 	ld	a,(hl+)
   030C 66                  679 	ld	h,(hl)
   030D 6F                  680 	ld	l,a
   030E E5                  681 	push	hl
   030F CDr00r00            682 	call	_CheckCollision
   0312 E8 04               683 	add	sp, #4
   0314 C1                  684 	pop	bc
   0315 7B                  685 	ld	a,e
   0316 B7                  686 	or	a, a
   0317 28 2C               687 	jr	Z,00122$
                            688 ;SpritePlayer.c:80: SetState(STATE_MENU);
   0319 C5                  689 	push	bc
   031A AF                  690 	xor	a, a
   031B F5                  691 	push	af
   031C 33                  692 	inc	sp
   031D CDr00r00            693 	call	_SetState
   0320 33                  694 	inc	sp
   0321 C1                  695 	pop	bc
                            696 ;SpritePlayer.c:81: PlayFx(CHANNEL_1, 10, 0x4f, 0xc7, 0xf3, 0x73, 0x86);
   0322 C5                  697 	push	bc
   0323 21 86 00            698 	ld	hl,#0x0086
   0326 E5                  699 	push	hl
   0327 2E 73               700 	ld	l, #0x73
   0329 E5                  701 	push	hl
   032A 2E F3               702 	ld	l, #0xf3
   032C E5                  703 	push	hl
   032D 2E C7               704 	ld	l, #0xc7
   032F E5                  705 	push	hl
   0330 2E 4F               706 	ld	l, #0x4f
   0332 E5                  707 	push	hl
   0333 21 00 0A            708 	ld	hl,#0x0a00
   0336 E5                  709 	push	hl
   0337 CDr00r00            710 	call	_PlayFx
   033A E8 0C               711 	add	sp, #12
   033C C1                  712 	pop	bc
                            713 ;SpritePlayer.c:82: have_bomb = 3;
   033D 21r07r00            714 	ld	hl,#_have_bomb
   0340 36 03               715 	ld	(hl),#0x03
   0342 23                  716 	inc	hl
   0343 36 00               717 	ld	(hl),#0x00
   0345                     718 00122$:
                            719 ;SpritePlayer.c:85: if (spr->type == SPRITE_BOMB) {
   0345 0A                  720 	ld	a,(bc)
   0346 D6 06               721 	sub	a, #0x06
   0348 C2r8Er03            722 	jp	NZ,00126$
                            723 ;SpritePlayer.c:86: if (CheckCollision(THIS, spr)) {
   034B C5                  724 	push	bc
   034C D1                  725 	pop	de
   034D E1                  726 	pop	hl
   034E E5                  727 	push	hl
   034F D5                  728 	push	de
   0350 E5                  729 	push	hl
   0351 21r00r00            730 	ld	hl,#_THIS
   0354 2A                  731 	ld	a,(hl+)
   0355 66                  732 	ld	h,(hl)
   0356 6F                  733 	ld	l,a
   0357 E5                  734 	push	hl
   0358 CDr00r00            735 	call	_CheckCollision
   035B E8 04               736 	add	sp, #4
   035D C1                  737 	pop	bc
   035E 7B                  738 	ld	a,e
   035F B7                  739 	or	a, a
   0360 28 2C               740 	jr	Z,00126$
                            741 ;SpritePlayer.c:87: SetState(STATE_MENU);
   0362 C5                  742 	push	bc
   0363 AF                  743 	xor	a, a
   0364 F5                  744 	push	af
   0365 33                  745 	inc	sp
   0366 CDr00r00            746 	call	_SetState
   0369 33                  747 	inc	sp
   036A C1                  748 	pop	bc
                            749 ;SpritePlayer.c:88: PlayFx(CHANNEL_1, 10, 0x4f, 0xc7, 0xf3, 0x73, 0x86);
   036B C5                  750 	push	bc
   036C 21 86 00            751 	ld	hl,#0x0086
   036F E5                  752 	push	hl
   0370 2E 73               753 	ld	l, #0x73
   0372 E5                  754 	push	hl
   0373 2E F3               755 	ld	l, #0xf3
   0375 E5                  756 	push	hl
   0376 2E C7               757 	ld	l, #0xc7
   0378 E5                  758 	push	hl
   0379 2E 4F               759 	ld	l, #0x4f
   037B E5                  760 	push	hl
   037C 21 00 0A            761 	ld	hl,#0x0a00
   037F E5                  762 	push	hl
   0380 CDr00r00            763 	call	_PlayFx
   0383 E8 0C               764 	add	sp, #12
   0385 C1                  765 	pop	bc
                            766 ;SpritePlayer.c:89: have_bomb = 3;
   0386 21r07r00            767 	ld	hl,#_have_bomb
   0389 36 03               768 	ld	(hl),#0x03
   038B 23                  769 	inc	hl
   038C 36 00               770 	ld	(hl),#0x00
   038E                     771 00126$:
                            772 ;SpritePlayer.c:92: if (spr->type == SPRITE_KEY) {
   038E 0A                  773 	ld	a,(bc)
   038F D6 03               774 	sub	a, #0x03
   0391 C2rF7r03            775 	jp	NZ,00130$
                            776 ;SpritePlayer.c:93: if (CheckCollision(THIS, spr)) {
   0394 C5                  777 	push	bc
   0395 D1                  778 	pop	de
   0396 E1                  779 	pop	hl
   0397 E5                  780 	push	hl
   0398 D5                  781 	push	de
   0399 E5                  782 	push	hl
   039A 21r00r00            783 	ld	hl,#_THIS
   039D 2A                  784 	ld	a,(hl+)
   039E 66                  785 	ld	h,(hl)
   039F 6F                  786 	ld	l,a
   03A0 E5                  787 	push	hl
   03A1 CDr00r00            788 	call	_CheckCollision
   03A4 E8 04               789 	add	sp, #4
   03A6 C1                  790 	pop	bc
   03A7 7B                  791 	ld	a,e
   03A8 B7                  792 	or	a, a
   03A9 CArF7r03            793 	jp	Z,00130$
                            794 ;SpritePlayer.c:94: SpriteManagerRemoveSprite(spr);
   03AC C5                  795 	push	bc
   03AD D1                  796 	pop	de
   03AE E1                  797 	pop	hl
   03AF E5                  798 	push	hl
   03B0 D5                  799 	push	de
   03B1 E5                  800 	push	hl
   03B2 CDr00r00            801 	call	_SpriteManagerRemoveSprite
   03B5 E8 02               802 	add	sp, #2
   03B7 C1                  803 	pop	bc
                            804 ;SpritePlayer.c:95: SpriteManagerRemove(2); //need to place door always as 2 sprite
   03B8 C5                  805 	push	bc
   03B9 21 02 00            806 	ld	hl,#0x0002
   03BC E5                  807 	push	hl
   03BD CDr00r00            808 	call	_SpriteManagerRemove
   03C0 E8 02               809 	add	sp, #2
   03C2 C1                  810 	pop	bc
                            811 ;SpritePlayer.c:96: SpriteManagerAdd(SPRITE_DOOROPEN, door_x, door_y);
   03C3 C5                  812 	push	bc
   03C4 21r03r00            813 	ld	hl,#_door_y
   03C7 2A                  814 	ld	a,(hl+)
   03C8 66                  815 	ld	h,(hl)
   03C9 6F                  816 	ld	l,a
   03CA E5                  817 	push	hl
   03CB 21r01r00            818 	ld	hl,#_door_x
   03CE 2A                  819 	ld	a,(hl+)
   03CF 66                  820 	ld	h,(hl)
   03D0 6F                  821 	ld	l,a
   03D1 E5                  822 	push	hl
   03D2 3E 05               823 	ld	a,#0x05
   03D4 F5                  824 	push	af
   03D5 33                  825 	inc	sp
   03D6 CDr00r00            826 	call	_SpriteManagerAdd
   03D9 E8 05               827 	add	sp, #5
   03DB C1                  828 	pop	bc
                            829 ;SpritePlayer.c:97: PlayFx(CHANNEL_1, 10, 0x4U, 0xFEU, 0xA1U, 0x8FU, 0x86U);
   03DC C5                  830 	push	bc
   03DD 21 86 00            831 	ld	hl,#0x0086
   03E0 E5                  832 	push	hl
   03E1 2E 8F               833 	ld	l, #0x8f
   03E3 E5                  834 	push	hl
   03E4 2E A1               835 	ld	l, #0xa1
   03E6 E5                  836 	push	hl
   03E7 2E FE               837 	ld	l, #0xfe
   03E9 E5                  838 	push	hl
   03EA 2E 04               839 	ld	l, #0x04
   03EC E5                  840 	push	hl
   03ED 21 00 0A            841 	ld	hl,#0x0a00
   03F0 E5                  842 	push	hl
   03F1 CDr00r00            843 	call	_PlayFx
   03F4 E8 0C               844 	add	sp, #12
   03F6 C1                  845 	pop	bc
   03F7                     846 00130$:
                            847 ;SpritePlayer.c:100: if (spr->type == SPRITE_DOOROPEN) {
   03F7 0A                  848 	ld	a,(bc)
   03F8 D6 05               849 	sub	a, #0x05
   03FA 20 1D               850 	jr	NZ,00138$
                            851 ;SpritePlayer.c:101: if (CheckCollision(THIS, spr)) {
   03FC E1                  852 	pop	hl
   03FD E5                  853 	push	hl
   03FE E5                  854 	push	hl
   03FF 21r00r00            855 	ld	hl,#_THIS
   0402 2A                  856 	ld	a,(hl+)
   0403 66                  857 	ld	h,(hl)
   0404 6F                  858 	ld	l,a
   0405 E5                  859 	push	hl
   0406 CDr00r00            860 	call	_CheckCollision
   0409 E8 04               861 	add	sp, #4
   040B 7B                  862 	ld	a,e
   040C B7                  863 	or	a, a
   040D 28 0A               864 	jr	Z,00138$
                            865 ;SpritePlayer.c:102: SetState(next_lvl);
   040F 21r05r00            866 	ld	hl,#_next_lvl
   0412 46                  867 	ld	b,(hl)
   0413 C5                  868 	push	bc
   0414 33                  869 	inc	sp
   0415 CDr00r00            870 	call	_SetState
   0418 33                  871 	inc	sp
   0419                     872 00138$:
                            873 ;SpritePlayer.c:70: SPRITEMANAGER_ITERATE(i, spr) {
   0419 F8 02               874 	ldhl	sp,#2
   041B 34                  875 	inc	(hl)
   041C 4E                  876 	ld	c,(hl)
   041D 06 00               877 	ld	b,#0x00
   041F 03                  878 	inc	bc
   0420 21r00r00            879 	ld	hl,#_sprite_manager_updatables
   0423 09                  880 	add	hl,bc
   0424 4D                  881 	ld	c,l
   0425 44                  882 	ld	b,h
   0426 0A                  883 	ld	a,(bc)
   0427 4F                  884 	ld	c,a
   0428 06 00               885 	ld	b,#0x00
   042A CB 21               886 	sla	c
   042C CB 10               887 	rl	b
   042E 21r00r00            888 	ld	hl,#_sprite_manager_sprites
   0431 09                  889 	add	hl,bc
   0432 4D                  890 	ld	c,l
   0433 44                  891 	ld	b,h
   0434 59                  892 	ld	e, c
   0435 50                  893 	ld	d, b
   0436 1A                  894 	ld	a,(de)
   0437 F8 00               895 	ldhl	sp,#0
   0439 22                  896 	ld	(hl+),a
   043A 13                  897 	inc	de
   043B 1A                  898 	ld	a,(de)
   043C 77                  899 	ld	(hl),a
   043D C3rA0r02            900 	jp	00137$
   0440                     901 00139$:
   0440 E8 05               902 	add	sp, #5
   0442 C9                  903 	ret
                            904 ;SpritePlayer.c:108: void Destroy_SPRITE_PLAYER() {
                            905 ;	---------------------------------
                            906 ; Function Destroy_SPRITE_PLAYER
                            907 ; ---------------------------------
   0443                     908 _Destroy_SPRITE_PLAYER::
                            909 ;SpritePlayer.c:109: }
   0443 C9                  910 	ret
                            911 	.area _CODE_2
                            912 	.area _CABS (ABS)
