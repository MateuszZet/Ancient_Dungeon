                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.6.0 #9615 (MINGW64)
                              4 ;--------------------------------------------------------
                              5 	.module SpritePlayer
                              6 	.optsdcc -mgbz80
                              7 	
                              8 ;--------------------------------------------------------
                              9 ; Public variables in this module
                             10 ;--------------------------------------------------------
                             11 	.globl _PlayFx
                             12 	.globl _SpriteManagerRemoveSprite
                             13 	.globl _SpriteManagerRemove
                             14 	.globl _SpriteManagerAdd
                             15 	.globl _SetState
                             16 	.globl _CheckCollision
                             17 	.globl _TranslateSprite
                             18 	.globl _SetSpriteAnim
                             19 	.globl _direction_x
                             20 	.globl _have_bomb
                             21 	.globl _next_lvl
                             22 	.globl _door_y
                             23 	.globl _door_x
                             24 	.globl _bank_SPRITE_PLAYER
                             25 	.globl _anim_up
                             26 	.globl _anim_left
                             27 	.globl _anim_right
                             28 	.globl _anim_down
                             29 	.globl _anim_idle
                             30 	.globl _Start_SPRITE_PLAYER
                             31 	.globl _Update_SPRITE_PLAYER
                             32 	.globl _Destroy_SPRITE_PLAYER
                             33 ;--------------------------------------------------------
                             34 ; ram data
                             35 ;--------------------------------------------------------
                             36 	.area _DATA
   0000                      37 _bank_SPRITE_PLAYER::
   0000                      38 	.ds 1
   0001                      39 _door_x::
   0001                      40 	.ds 2
   0003                      41 _door_y::
   0003                      42 	.ds 2
   0005                      43 _next_lvl::
   0005                      44 	.ds 2
   0007                      45 _have_bomb::
   0007                      46 	.ds 2
   0009                      47 _direction_x::
   0009                      48 	.ds 2
                             49 ;--------------------------------------------------------
                             50 ; absolute external ram data
                             51 ;--------------------------------------------------------
                             52 	.area _DABS (ABS)
                             53 ;--------------------------------------------------------
                             54 ; global & static initialisations
                             55 ;--------------------------------------------------------
                             56 	.area _HOME
                             57 	.area _GSINIT
                             58 	.area _GSFINAL
                             59 	.area _GSINIT
                             60 ;SpritePlayer.c:14: UINT8 bank_SPRITE_PLAYER = 2;
   0000 21r00r00             61 	ld	hl,#_bank_SPRITE_PLAYER
   0003 36 02                62 	ld	(hl),#0x02
                             63 ;--------------------------------------------------------
                             64 ; Home
                             65 ;--------------------------------------------------------
                             66 	.area _HOME
                             67 	.area _HOME
                             68 ;--------------------------------------------------------
                             69 ; code
                             70 ;--------------------------------------------------------
                             71 	.area _CODE_2
                             72 ;SpritePlayer.c:22: void Start_SPRITE_PLAYER() {
                             73 ;	---------------------------------
                             74 ; Function Start_SPRITE_PLAYER
                             75 ; ---------------------------------
   0000                      76 _Start_SPRITE_PLAYER::
                             77 ;SpritePlayer.c:23: THIS->coll_x = 1;
   0000 21r01r00             78 	ld	hl,#_THIS + 1
   0003 2B                   79 	dec	hl
   0004 4E                   80 	ld	c,(hl)
   0005 23                   81 	inc	hl
   0006 46                   82 	ld	b,(hl)
   0007 21 0C 00             83 	ld	hl,#0x000c
   000A 09                   84 	add	hl,bc
   000B 4D                   85 	ld	c,l
   000C 44                   86 	ld	b,h
   000D 3E 01                87 	ld	a,#0x01
   000F 02                   88 	ld	(bc),a
                             89 ;SpritePlayer.c:24: THIS->coll_y = 0;
   0010 21r01r00             90 	ld	hl,#_THIS + 1
   0013 2B                   91 	dec	hl
   0014 4E                   92 	ld	c,(hl)
   0015 23                   93 	inc	hl
   0016 46                   94 	ld	b,(hl)
   0017 21 0D 00             95 	ld	hl,#0x000d
   001A 09                   96 	add	hl,bc
   001B 4D                   97 	ld	c,l
   001C 44                   98 	ld	b,h
   001D AF                   99 	xor	a, a
   001E 02                  100 	ld	(bc),a
                            101 ;SpritePlayer.c:25: THIS->coll_w = 13;
   001F 21r01r00            102 	ld	hl,#_THIS + 1
   0022 2B                  103 	dec	hl
   0023 4E                  104 	ld	c,(hl)
   0024 23                  105 	inc	hl
   0025 46                  106 	ld	b,(hl)
   0026 21 0E 00            107 	ld	hl,#0x000e
   0029 09                  108 	add	hl,bc
   002A 4D                  109 	ld	c,l
   002B 44                  110 	ld	b,h
   002C 3E 0D               111 	ld	a,#0x0d
   002E 02                  112 	ld	(bc),a
                            113 ;SpritePlayer.c:26: THIS->coll_h = 16;
   002F 21r01r00            114 	ld	hl,#_THIS + 1
   0032 2B                  115 	dec	hl
   0033 4E                  116 	ld	c,(hl)
   0034 23                  117 	inc	hl
   0035 46                  118 	ld	b,(hl)
   0036 21 0F 00            119 	ld	hl,#0x000f
   0039 09                  120 	add	hl,bc
   003A 4D                  121 	ld	c,l
   003B 44                  122 	ld	b,h
   003C 3E 10               123 	ld	a,#0x10
   003E 02                  124 	ld	(bc),a
   003F C9                  125 	ret
   0040                     126 _anim_idle:
   0040 01                  127 	.db #0x01	; 1
   0041 00                  128 	.db #0x00	; 0
   0042                     129 _anim_down:
   0042 02                  130 	.db #0x02	; 2
   0043 01                  131 	.db #0x01	; 1
   0044 02                  132 	.db #0x02	; 2
   0045                     133 _anim_right:
   0045 02                  134 	.db #0x02	; 2
   0046 03                  135 	.db #0x03	; 3
   0047 04                  136 	.db #0x04	; 4
   0048                     137 _anim_left:
   0048 02                  138 	.db #0x02	; 2
   0049 05                  139 	.db #0x05	; 5
   004A 06                  140 	.db #0x06	; 6
   004B                     141 _anim_up:
   004B 02                  142 	.db #0x02	; 2
   004C 07                  143 	.db #0x07	; 7
   004D 08                  144 	.db #0x08	; 8
                            145 ;SpritePlayer.c:29: void Update_SPRITE_PLAYER() {
                            146 ;	---------------------------------
                            147 ; Function Update_SPRITE_PLAYER
                            148 ; ---------------------------------
   004E                     149 _Update_SPRITE_PLAYER::
   004E E8 FB               150 	add	sp, #-5
                            151 ;SpritePlayer.c:34: if(KEY_PRESSED(J_UP)){
   0050 21r00r00            152 	ld	hl,#_keys
   0053 4E                  153 	ld	c,(hl)
   0054 06 00               154 	ld	b,#0x00
   0056 CB 51               155 	bit	2, c
   0058 CArB2r00            156 	jp	Z,00102$
                            157 ;SpritePlayer.c:35: THIS->y--;
   005B 21r01r00            158 	ld	hl,#_THIS + 1
   005E 2B                  159 	dec	hl
   005F 4E                  160 	ld	c,(hl)
   0060 23                  161 	inc	hl
   0061 46                  162 	ld	b,(hl)
   0062 21 09 00            163 	ld	hl,#0x0009
   0065 09                  164 	add	hl,bc
   0066 7D                  165 	ld	a,l
   0067 54                  166 	ld	d,h
   0068 F8 03               167 	ldhl	sp,#3
   006A 22                  168 	ld	(hl+),a
   006B 72                  169 	ld	(hl),d
   006C 2B                  170 	dec	hl
   006D 5E                  171 	ld	e,(hl)
   006E 23                  172 	inc	hl
   006F 56                  173 	ld	d,(hl)
   0070 1A                  174 	ld	a,(de)
   0071 4F                  175 	ld	c,a
   0072 13                  176 	inc	de
   0073 1A                  177 	ld	a,(de)
   0074 47                  178 	ld	b,a
   0075 0B                  179 	dec	bc
   0076 2B                  180 	dec	hl
   0077 2A                  181 	ld	a,(hl+)
   0078 66                  182 	ld	h,(hl)
   0079 6F                  183 	ld	l,a
   007A 71                  184 	ld	(hl),c
   007B 23                  185 	inc	hl
   007C 70                  186 	ld	(hl),b
                            187 ;SpritePlayer.c:36: SetSpriteAnim(THIS, anim_up, 10);
   007D 3E 0A               188 	ld	a,#0x0a
   007F F5                  189 	push	af
   0080 33                  190 	inc	sp
   0081 21r4Br00            191 	ld	hl,#_anim_up
   0084 E5                  192 	push	hl
   0085 21r00r00            193 	ld	hl,#_THIS
   0088 2A                  194 	ld	a,(hl+)
   0089 66                  195 	ld	h,(hl)
   008A 6F                  196 	ld	l,a
   008B E5                  197 	push	hl
   008C CDr00r00            198 	call	_SetSpriteAnim
   008F E8 05               199 	add	sp, #5
                            200 ;SpritePlayer.c:37: TranslateSprite(THIS, 0, -1 << delta_time);
   0091 21r00r00            201 	ld	hl,#_delta_time
   0094 7E                  202 	ld	a,(hl)
   0095 F5                  203 	push	af
   0096 06 FF               204 	ld	b,#0xff
   0098 F1                  205 	pop	af
   0099 3C                  206 	inc	a
   009A 18 02               207 	jr	00264$
   009C                     208 00263$:
   009C CB 20               209 	sla	b
   009E                     210 00264$:
   009E 3D                  211 	dec	a
   009F 20 FB               212 	jr	NZ,00263$
   00A1 C5                  213 	push	bc
   00A2 33                  214 	inc	sp
   00A3 AF                  215 	xor	a, a
   00A4 F5                  216 	push	af
   00A5 33                  217 	inc	sp
   00A6 21r00r00            218 	ld	hl,#_THIS
   00A9 2A                  219 	ld	a,(hl+)
   00AA 66                  220 	ld	h,(hl)
   00AB 6F                  221 	ld	l,a
   00AC E5                  222 	push	hl
   00AD CDr00r00            223 	call	_TranslateSprite
   00B0 E8 04               224 	add	sp, #4
   00B2                     225 00102$:
                            226 ;SpritePlayer.c:39: if(KEY_PRESSED(J_DOWN)){
   00B2 21r00r00            227 	ld	hl,#_keys
   00B5 4E                  228 	ld	c,(hl)
   00B6 06 00               229 	ld	b,#0x00
   00B8 CB 59               230 	bit	3, c
   00BA CAr14r01            231 	jp	Z,00104$
                            232 ;SpritePlayer.c:40: THIS->y++;
   00BD 21r01r00            233 	ld	hl,#_THIS + 1
   00C0 2B                  234 	dec	hl
   00C1 4E                  235 	ld	c,(hl)
   00C2 23                  236 	inc	hl
   00C3 46                  237 	ld	b,(hl)
   00C4 21 09 00            238 	ld	hl,#0x0009
   00C7 09                  239 	add	hl,bc
   00C8 7D                  240 	ld	a,l
   00C9 54                  241 	ld	d,h
   00CA F8 03               242 	ldhl	sp,#3
   00CC 22                  243 	ld	(hl+),a
   00CD 72                  244 	ld	(hl),d
   00CE 2B                  245 	dec	hl
   00CF 5E                  246 	ld	e,(hl)
   00D0 23                  247 	inc	hl
   00D1 56                  248 	ld	d,(hl)
   00D2 1A                  249 	ld	a,(de)
   00D3 4F                  250 	ld	c,a
   00D4 13                  251 	inc	de
   00D5 1A                  252 	ld	a,(de)
   00D6 47                  253 	ld	b,a
   00D7 03                  254 	inc	bc
   00D8 2B                  255 	dec	hl
   00D9 2A                  256 	ld	a,(hl+)
   00DA 66                  257 	ld	h,(hl)
   00DB 6F                  258 	ld	l,a
   00DC 71                  259 	ld	(hl),c
   00DD 23                  260 	inc	hl
   00DE 70                  261 	ld	(hl),b
                            262 ;SpritePlayer.c:41: SetSpriteAnim(THIS, anim_down, 10);
   00DF 3E 0A               263 	ld	a,#0x0a
   00E1 F5                  264 	push	af
   00E2 33                  265 	inc	sp
   00E3 21r42r00            266 	ld	hl,#_anim_down
   00E6 E5                  267 	push	hl
   00E7 21r00r00            268 	ld	hl,#_THIS
   00EA 2A                  269 	ld	a,(hl+)
   00EB 66                  270 	ld	h,(hl)
   00EC 6F                  271 	ld	l,a
   00ED E5                  272 	push	hl
   00EE CDr00r00            273 	call	_SetSpriteAnim
   00F1 E8 05               274 	add	sp, #5
                            275 ;SpritePlayer.c:42: TranslateSprite(THIS, 0, 1 << delta_time);
   00F3 21r00r00            276 	ld	hl,#_delta_time
   00F6 7E                  277 	ld	a,(hl)
   00F7 F5                  278 	push	af
   00F8 06 01               279 	ld	b,#0x01
   00FA F1                  280 	pop	af
   00FB 3C                  281 	inc	a
   00FC 18 02               282 	jr	00267$
   00FE                     283 00266$:
   00FE CB 20               284 	sla	b
   0100                     285 00267$:
   0100 3D                  286 	dec	a
   0101 20 FB               287 	jr	NZ,00266$
   0103 C5                  288 	push	bc
   0104 33                  289 	inc	sp
   0105 AF                  290 	xor	a, a
   0106 F5                  291 	push	af
   0107 33                  292 	inc	sp
   0108 21r00r00            293 	ld	hl,#_THIS
   010B 2A                  294 	ld	a,(hl+)
   010C 66                  295 	ld	h,(hl)
   010D 6F                  296 	ld	l,a
   010E E5                  297 	push	hl
   010F CDr00r00            298 	call	_TranslateSprite
   0112 E8 04               299 	add	sp, #4
   0114                     300 00104$:
                            301 ;SpritePlayer.c:44: if(KEY_PRESSED(J_RIGHT)){
   0114 21r00r00            302 	ld	hl,#_keys
   0117 4E                  303 	ld	c,(hl)
   0118 06 00               304 	ld	b,#0x00
   011A CB 41               305 	bit	0, c
   011C CAr7Er01            306 	jp	Z,00106$
                            307 ;SpritePlayer.c:45: THIS->x++;
   011F 21r01r00            308 	ld	hl,#_THIS + 1
   0122 2B                  309 	dec	hl
   0123 4E                  310 	ld	c,(hl)
   0124 23                  311 	inc	hl
   0125 46                  312 	ld	b,(hl)
   0126 21 07 00            313 	ld	hl,#0x0007
   0129 09                  314 	add	hl,bc
   012A 7D                  315 	ld	a,l
   012B 54                  316 	ld	d,h
   012C F8 03               317 	ldhl	sp,#3
   012E 22                  318 	ld	(hl+),a
   012F 72                  319 	ld	(hl),d
   0130 2B                  320 	dec	hl
   0131 5E                  321 	ld	e,(hl)
   0132 23                  322 	inc	hl
   0133 56                  323 	ld	d,(hl)
   0134 1A                  324 	ld	a,(de)
   0135 4F                  325 	ld	c,a
   0136 13                  326 	inc	de
   0137 1A                  327 	ld	a,(de)
   0138 47                  328 	ld	b,a
   0139 03                  329 	inc	bc
   013A 2B                  330 	dec	hl
   013B 2A                  331 	ld	a,(hl+)
   013C 66                  332 	ld	h,(hl)
   013D 6F                  333 	ld	l,a
   013E 71                  334 	ld	(hl),c
   013F 23                  335 	inc	hl
   0140 70                  336 	ld	(hl),b
                            337 ;SpritePlayer.c:46: SetSpriteAnim(THIS, anim_right, 10);
   0141 3E 0A               338 	ld	a,#0x0a
   0143 F5                  339 	push	af
   0144 33                  340 	inc	sp
   0145 21r45r00            341 	ld	hl,#_anim_right
   0148 E5                  342 	push	hl
   0149 21r00r00            343 	ld	hl,#_THIS
   014C 2A                  344 	ld	a,(hl+)
   014D 66                  345 	ld	h,(hl)
   014E 6F                  346 	ld	l,a
   014F E5                  347 	push	hl
   0150 CDr00r00            348 	call	_SetSpriteAnim
   0153 E8 05               349 	add	sp, #5
                            350 ;SpritePlayer.c:47: TranslateSprite(THIS, 1 << delta_time, 0);
   0155 21r00r00            351 	ld	hl,#_delta_time
   0158 7E                  352 	ld	a,(hl)
   0159 F5                  353 	push	af
   015A 06 01               354 	ld	b,#0x01
   015C F1                  355 	pop	af
   015D 3C                  356 	inc	a
   015E 18 02               357 	jr	00270$
   0160                     358 00269$:
   0160 CB 20               359 	sla	b
   0162                     360 00270$:
   0162 3D                  361 	dec	a
   0163 20 FB               362 	jr	NZ,00269$
   0165 AF                  363 	xor	a, a
   0166 F5                  364 	push	af
   0167 33                  365 	inc	sp
   0168 C5                  366 	push	bc
   0169 33                  367 	inc	sp
   016A 21r00r00            368 	ld	hl,#_THIS
   016D 2A                  369 	ld	a,(hl+)
   016E 66                  370 	ld	h,(hl)
   016F 6F                  371 	ld	l,a
   0170 E5                  372 	push	hl
   0171 CDr00r00            373 	call	_TranslateSprite
   0174 E8 04               374 	add	sp, #4
                            375 ;SpritePlayer.c:48: direction_x = 1;
   0176 21r09r00            376 	ld	hl,#_direction_x
   0179 36 01               377 	ld	(hl),#0x01
   017B 23                  378 	inc	hl
   017C 36 00               379 	ld	(hl),#0x00
   017E                     380 00106$:
                            381 ;SpritePlayer.c:51: if(KEY_PRESSED(J_LEFT)){
   017E 21r00r00            382 	ld	hl,#_keys
   0181 4E                  383 	ld	c,(hl)
   0182 06 00               384 	ld	b,#0x00
   0184 CB 49               385 	bit	1, c
   0186 CArE8r01            386 	jp	Z,00108$
                            387 ;SpritePlayer.c:52: THIS->x--;
   0189 21r01r00            388 	ld	hl,#_THIS + 1
   018C 2B                  389 	dec	hl
   018D 4E                  390 	ld	c,(hl)
   018E 23                  391 	inc	hl
   018F 46                  392 	ld	b,(hl)
   0190 21 07 00            393 	ld	hl,#0x0007
   0193 09                  394 	add	hl,bc
   0194 7D                  395 	ld	a,l
   0195 54                  396 	ld	d,h
   0196 F8 03               397 	ldhl	sp,#3
   0198 22                  398 	ld	(hl+),a
   0199 72                  399 	ld	(hl),d
   019A 2B                  400 	dec	hl
   019B 5E                  401 	ld	e,(hl)
   019C 23                  402 	inc	hl
   019D 56                  403 	ld	d,(hl)
   019E 1A                  404 	ld	a,(de)
   019F 4F                  405 	ld	c,a
   01A0 13                  406 	inc	de
   01A1 1A                  407 	ld	a,(de)
   01A2 47                  408 	ld	b,a
   01A3 0B                  409 	dec	bc
   01A4 2B                  410 	dec	hl
   01A5 2A                  411 	ld	a,(hl+)
   01A6 66                  412 	ld	h,(hl)
   01A7 6F                  413 	ld	l,a
   01A8 71                  414 	ld	(hl),c
   01A9 23                  415 	inc	hl
   01AA 70                  416 	ld	(hl),b
                            417 ;SpritePlayer.c:53: SetSpriteAnim(THIS, anim_left, 10);
   01AB 3E 0A               418 	ld	a,#0x0a
   01AD F5                  419 	push	af
   01AE 33                  420 	inc	sp
   01AF 21r48r00            421 	ld	hl,#_anim_left
   01B2 E5                  422 	push	hl
   01B3 21r00r00            423 	ld	hl,#_THIS
   01B6 2A                  424 	ld	a,(hl+)
   01B7 66                  425 	ld	h,(hl)
   01B8 6F                  426 	ld	l,a
   01B9 E5                  427 	push	hl
   01BA CDr00r00            428 	call	_SetSpriteAnim
   01BD E8 05               429 	add	sp, #5
                            430 ;SpritePlayer.c:54: TranslateSprite(THIS, -1 << delta_time, 0);
   01BF 21r00r00            431 	ld	hl,#_delta_time
   01C2 7E                  432 	ld	a,(hl)
   01C3 F5                  433 	push	af
   01C4 06 FF               434 	ld	b,#0xff
   01C6 F1                  435 	pop	af
   01C7 3C                  436 	inc	a
   01C8 18 02               437 	jr	00273$
   01CA                     438 00272$:
   01CA CB 20               439 	sla	b
   01CC                     440 00273$:
   01CC 3D                  441 	dec	a
   01CD 20 FB               442 	jr	NZ,00272$
   01CF AF                  443 	xor	a, a
   01D0 F5                  444 	push	af
   01D1 33                  445 	inc	sp
   01D2 C5                  446 	push	bc
   01D3 33                  447 	inc	sp
   01D4 21r00r00            448 	ld	hl,#_THIS
   01D7 2A                  449 	ld	a,(hl+)
   01D8 66                  450 	ld	h,(hl)
   01D9 6F                  451 	ld	l,a
   01DA E5                  452 	push	hl
   01DB CDr00r00            453 	call	_TranslateSprite
   01DE E8 04               454 	add	sp, #4
                            455 ;SpritePlayer.c:55: direction_x = 0;
   01E0 21r09r00            456 	ld	hl,#_direction_x
   01E3 36 00               457 	ld	(hl),#0x00
   01E5 23                  458 	inc	hl
   01E6 36 00               459 	ld	(hl),#0x00
   01E8                     460 00108$:
                            461 ;SpritePlayer.c:58: if(keys == 0){
   01E8 21r00r00            462 	ld	hl,#_keys
   01EB 7E                  463 	ld	a,(hl)
   01EC B7                  464 	or	a, a
   01ED 20 14               465 	jr	NZ,00110$
                            466 ;SpritePlayer.c:59: SetSpriteAnim(THIS, anim_idle, 20);
   01EF 3E 14               467 	ld	a,#0x14
   01F1 F5                  468 	push	af
   01F2 33                  469 	inc	sp
   01F3 21r40r00            470 	ld	hl,#_anim_idle
   01F6 E5                  471 	push	hl
   01F7 21r00r00            472 	ld	hl,#_THIS
   01FA 2A                  473 	ld	a,(hl+)
   01FB 66                  474 	ld	h,(hl)
   01FC 6F                  475 	ld	l,a
   01FD E5                  476 	push	hl
   01FE CDr00r00            477 	call	_SetSpriteAnim
   0201 E8 05               478 	add	sp, #5
   0203                     479 00110$:
                            480 ;SpritePlayer.c:61: if (KEY_TICKED(J_A) && have_bomb>0 ) {
   0203 21r00r00            481 	ld	hl,#_keys
   0206 4E                  482 	ld	c,(hl)
   0207 06 00               483 	ld	b,#0x00
   0209 CB 61               484 	bit	4, c
   020B CAr9Dr02            485 	jp	Z,00112$
   020E 21r00r00            486 	ld	hl,#_previous_keys
   0211 4E                  487 	ld	c,(hl)
   0212 06 00               488 	ld	b,#0x00
   0214 CB 61               489 	bit	4, c
   0216 C2r9Dr02            490 	jp	NZ,00112$
   0219 21r07r00            491 	ld	hl,#_have_bomb
   021C 3E 00               492 	ld	a,#0x00
   021E 96                  493 	sub	a, (hl)
   021F 23                  494 	inc	hl
   0220 3E 00               495 	ld	a,#0x00
   0222 9E                  496 	sbc	a, (hl)
   0223 3E 00               497 	ld	a,#0x00
   0225 57                  498 	ld	d, a
   0226 5E                  499 	ld	e, (hl)
   0227 CB 7B               500 	bit	7, e
   0229 28 07               501 	jr	Z,00277$
   022B CB 7A               502 	bit	7, d
   022D 20 08               503 	jr	NZ,00278$
   022F BF                  504 	cp	a, a
   0230 18 05               505 	jr	00278$
   0232                     506 00277$:
   0232 CB 7A               507 	bit	7, d
   0234 28 01               508 	jr	Z,00278$
   0236 37                  509 	scf
   0237                     510 00278$:
   0237 D2r9Dr02            511 	jp	NC,00112$
                            512 ;SpritePlayer.c:35: THIS->y--;
   023A 21r01r00            513 	ld	hl,#_THIS + 1
   023D 2B                  514 	dec	hl
   023E 4E                  515 	ld	c,(hl)
   023F 23                  516 	inc	hl
   0240 46                  517 	ld	b,(hl)
                            518 ;SpritePlayer.c:62: SpriteManagerAdd(SPRITE_BOMB, THIS->x + 15, THIS->y);
   0241 21 09 00            519 	ld	hl,#0x0009
   0244 09                  520 	add	hl,bc
   0245 7D                  521 	ld	a,l
   0246 54                  522 	ld	d,h
   0247 F8 03               523 	ldhl	sp,#3
   0249 22                  524 	ld	(hl+),a
   024A 72                  525 	ld	(hl),d
   024B 2B                  526 	dec	hl
   024C 5E                  527 	ld	e,(hl)
   024D 23                  528 	inc	hl
   024E 56                  529 	ld	d,(hl)
   024F 1A                  530 	ld	a,(de)
   0250 2B                  531 	dec	hl
   0251 22                  532 	ld	(hl+),a
   0252 13                  533 	inc	de
   0253 1A                  534 	ld	a,(de)
   0254 77                  535 	ld	(hl),a
   0255 21 07 00            536 	ld	hl,#0x0007
   0258 09                  537 	add	hl,bc
   0259 4D                  538 	ld	c,l
   025A 44                  539 	ld	b,h
   025B 59                  540 	ld	e, c
   025C 50                  541 	ld	d, b
   025D 1A                  542 	ld	a,(de)
   025E 4F                  543 	ld	c,a
   025F 13                  544 	inc	de
   0260 1A                  545 	ld	a,(de)
   0261 47                  546 	ld	b,a
   0262 21 0F 00            547 	ld	hl,#0x000f
   0265 09                  548 	add	hl,bc
   0266 4D                  549 	ld	c,l
   0267 44                  550 	ld	b,h
   0268 F8 03               551 	ldhl	sp,#3
   026A 2A                  552 	ld	a,(hl+)
   026B 66                  553 	ld	h,(hl)
   026C 6F                  554 	ld	l,a
   026D E5                  555 	push	hl
   026E C5                  556 	push	bc
   026F 3E 06               557 	ld	a,#0x06
   0271 F5                  558 	push	af
   0272 33                  559 	inc	sp
   0273 CDr00r00            560 	call	_SpriteManagerAdd
   0276 E8 05               561 	add	sp, #5
                            562 ;SpritePlayer.c:63: have_bomb--;
   0278 21r08r00            563 	ld	hl,#_have_bomb + 1
   027B 2B                  564 	dec	hl
   027C 5E                  565 	ld	e,(hl)
   027D 23                  566 	inc	hl
   027E 56                  567 	ld	d,(hl)
   027F 1B                  568 	dec	de
   0280 2B                  569 	dec	hl
   0281 73                  570 	ld	(hl),e
   0282 23                  571 	inc	hl
   0283 72                  572 	ld	(hl),d
                            573 ;SpritePlayer.c:64: PlayFx(CHANNEL_1, 10, 0x38, 0x70, 0xe0, 0x0a, 0xc6);
   0284 21 C6 00            574 	ld	hl,#0x00c6
   0287 E5                  575 	push	hl
   0288 2E 0A               576 	ld	l, #0x0a
   028A E5                  577 	push	hl
   028B 2E E0               578 	ld	l, #0xe0
   028D E5                  579 	push	hl
   028E 2E 70               580 	ld	l, #0x70
   0290 E5                  581 	push	hl
   0291 2E 38               582 	ld	l, #0x38
   0293 E5                  583 	push	hl
   0294 21 00 0A            584 	ld	hl,#0x0a00
   0297 E5                  585 	push	hl
   0298 CDr00r00            586 	call	_PlayFx
   029B E8 0C               587 	add	sp, #12
   029D                     588 00112$:
                            589 ;SpritePlayer.c:67: if (KEY_TICKED(J_B) && have_bomb>0) {
   029D 21r00r00            590 	ld	hl,#_keys
   02A0 4E                  591 	ld	c,(hl)
   02A1 06 00               592 	ld	b,#0x00
   02A3 CB 69               593 	bit	5, c
   02A5 CAr39r03            594 	jp	Z,00116$
   02A8 21r00r00            595 	ld	hl,#_previous_keys
   02AB 4E                  596 	ld	c,(hl)
   02AC 06 00               597 	ld	b,#0x00
   02AE CB 69               598 	bit	5, c
   02B0 C2r39r03            599 	jp	NZ,00116$
   02B3 21r07r00            600 	ld	hl,#_have_bomb
   02B6 3E 00               601 	ld	a,#0x00
   02B8 96                  602 	sub	a, (hl)
   02B9 23                  603 	inc	hl
   02BA 3E 00               604 	ld	a,#0x00
   02BC 9E                  605 	sbc	a, (hl)
   02BD 3E 00               606 	ld	a,#0x00
   02BF 57                  607 	ld	d, a
   02C0 5E                  608 	ld	e, (hl)
   02C1 CB 7B               609 	bit	7, e
   02C3 28 07               610 	jr	Z,00282$
   02C5 CB 7A               611 	bit	7, d
   02C7 20 08               612 	jr	NZ,00283$
   02C9 BF                  613 	cp	a, a
   02CA 18 05               614 	jr	00283$
   02CC                     615 00282$:
   02CC CB 7A               616 	bit	7, d
   02CE 28 01               617 	jr	Z,00283$
   02D0 37                  618 	scf
   02D1                     619 00283$:
   02D1 D2r39r03            620 	jp	NC,00116$
                            621 ;SpritePlayer.c:35: THIS->y--;
   02D4 21r01r00            622 	ld	hl,#_THIS + 1
   02D7 2B                  623 	dec	hl
   02D8 4E                  624 	ld	c,(hl)
   02D9 23                  625 	inc	hl
   02DA 46                  626 	ld	b,(hl)
                            627 ;SpritePlayer.c:68: SpriteManagerAdd(SPRITE_BOMB_L, THIS->x - 20, THIS->y);
   02DB 21 09 00            628 	ld	hl,#0x0009
   02DE 09                  629 	add	hl,bc
   02DF 7D                  630 	ld	a,l
   02E0 54                  631 	ld	d,h
   02E1 F8 03               632 	ldhl	sp,#3
   02E3 22                  633 	ld	(hl+),a
   02E4 72                  634 	ld	(hl),d
   02E5 2B                  635 	dec	hl
   02E6 5E                  636 	ld	e,(hl)
   02E7 23                  637 	inc	hl
   02E8 56                  638 	ld	d,(hl)
   02E9 1A                  639 	ld	a,(de)
   02EA 2B                  640 	dec	hl
   02EB 22                  641 	ld	(hl+),a
   02EC 13                  642 	inc	de
   02ED 1A                  643 	ld	a,(de)
   02EE 77                  644 	ld	(hl),a
   02EF 21 07 00            645 	ld	hl,#0x0007
   02F2 09                  646 	add	hl,bc
   02F3 4D                  647 	ld	c,l
   02F4 44                  648 	ld	b,h
   02F5 59                  649 	ld	e, c
   02F6 50                  650 	ld	d, b
   02F7 1A                  651 	ld	a,(de)
   02F8 4F                  652 	ld	c,a
   02F9 13                  653 	inc	de
   02FA 1A                  654 	ld	a,(de)
   02FB 47                  655 	ld	b,a
   02FC 79                  656 	ld	a,c
   02FD C6 EC               657 	add	a,#0xec
   02FF 4F                  658 	ld	c,a
   0300 78                  659 	ld	a,b
   0301 CE FF               660 	adc	a,#0xff
   0303 47                  661 	ld	b,a
   0304 F8 03               662 	ldhl	sp,#3
   0306 2A                  663 	ld	a,(hl+)
   0307 66                  664 	ld	h,(hl)
   0308 6F                  665 	ld	l,a
   0309 E5                  666 	push	hl
   030A C5                  667 	push	bc
   030B 3E 07               668 	ld	a,#0x07
   030D F5                  669 	push	af
   030E 33                  670 	inc	sp
   030F CDr00r00            671 	call	_SpriteManagerAdd
   0312 E8 05               672 	add	sp, #5
                            673 ;SpritePlayer.c:69: have_bomb--;
   0314 21r08r00            674 	ld	hl,#_have_bomb + 1
   0317 2B                  675 	dec	hl
   0318 5E                  676 	ld	e,(hl)
   0319 23                  677 	inc	hl
   031A 56                  678 	ld	d,(hl)
   031B 1B                  679 	dec	de
   031C 2B                  680 	dec	hl
   031D 73                  681 	ld	(hl),e
   031E 23                  682 	inc	hl
   031F 72                  683 	ld	(hl),d
                            684 ;SpritePlayer.c:70: PlayFx(CHANNEL_1, 10, 0x38, 0x70, 0xe0, 0x0a, 0xc6);
   0320 21 C6 00            685 	ld	hl,#0x00c6
   0323 E5                  686 	push	hl
   0324 2E 0A               687 	ld	l, #0x0a
   0326 E5                  688 	push	hl
   0327 2E E0               689 	ld	l, #0xe0
   0329 E5                  690 	push	hl
   032A 2E 70               691 	ld	l, #0x70
   032C E5                  692 	push	hl
   032D 2E 38               693 	ld	l, #0x38
   032F E5                  694 	push	hl
   0330 21 00 0A            695 	ld	hl,#0x0a00
   0333 E5                  696 	push	hl
   0334 CDr00r00            697 	call	_PlayFx
   0337 E8 0C               698 	add	sp, #12
   0339                     699 00116$:
                            700 ;SpritePlayer.c:76: SPRITEMANAGER_ITERATE(i, spr) {
   0339 FAr01r00            701 	ld	a, (#(_sprite_manager_updatables + 0x0001) + 0)
   033C 4F                  702 	ld	c,a
   033D 06 00               703 	ld	b,#0x00
   033F CB 21               704 	sla	c
   0341 CB 10               705 	rl	b
   0343 21r00r00            706 	ld	hl,#_sprite_manager_sprites
   0346 09                  707 	add	hl,bc
   0347 4D                  708 	ld	c,l
   0348 44                  709 	ld	b,h
   0349 59                  710 	ld	e, c
   034A 50                  711 	ld	d, b
   034B 1A                  712 	ld	a,(de)
   034C F8 01               713 	ldhl	sp,#1
   034E 22                  714 	ld	(hl+),a
   034F 13                  715 	inc	de
   0350 1A                  716 	ld	a,(de)
   0351 32                  717 	ld	(hl-),a
   0352 2B                  718 	dec	hl
   0353 36 00               719 	ld	(hl),#0x00
   0355                     720 00149$:
   0355 11r00r00            721 	ld	de, #_sprite_manager_updatables + 0
   0358 1A                  722 	ld	a,(de)
   0359 4F                  723 	ld	c,a
   035A F8 00               724 	ldhl	sp,#0
   035C 7E                  725 	ld	a,(hl)
   035D 91                  726 	sub	a, c
   035E CAr6Cr05            727 	jp	Z,00151$
                            728 ;SpritePlayer.c:77: if(spr->type == SPRITE_ENEMY) {
   0361 F8 01               729 	ldhl	sp,#(2 - 1)
   0363 5E                  730 	ld	e,(hl)
   0364 23                  731 	inc	hl
   0365 56                  732 	ld	d,(hl)
   0366 21 10 00            733 	ld	hl,#0x0010
   0369 19                  734 	add	hl,de
   036A 4D                  735 	ld	c,l
   036B 44                  736 	ld	b,h
   036C 0A                  737 	ld	a,(bc)
   036D 3D                  738 	dec	a
   036E C2rADr03            739 	jp	NZ,00122$
                            740 ;SpritePlayer.c:78: if(CheckCollision(THIS, spr)) {
   0371 C5                  741 	push	bc
   0372 F8 03               742 	ldhl	sp,#3
   0374 2A                  743 	ld	a,(hl+)
   0375 66                  744 	ld	h,(hl)
   0376 6F                  745 	ld	l,a
   0377 E5                  746 	push	hl
   0378 21r00r00            747 	ld	hl,#_THIS
   037B 2A                  748 	ld	a,(hl+)
   037C 66                  749 	ld	h,(hl)
   037D 6F                  750 	ld	l,a
   037E E5                  751 	push	hl
   037F CDr00r00            752 	call	_CheckCollision
   0382 E8 04               753 	add	sp, #4
   0384 C1                  754 	pop	bc
   0385 7B                  755 	ld	a,e
   0386 B7                  756 	or	a, a
   0387 28 24               757 	jr	Z,00122$
                            758 ;SpritePlayer.c:79: SetState(STATE_MENU);
   0389 C5                  759 	push	bc
   038A AF                  760 	xor	a, a
   038B F5                  761 	push	af
   038C 33                  762 	inc	sp
   038D CDr00r00            763 	call	_SetState
   0390 33                  764 	inc	sp
   0391 C1                  765 	pop	bc
                            766 ;SpritePlayer.c:80: PlayFx(CHANNEL_1, 10, 0x4f, 0xc7, 0xf3, 0x73, 0x86);
   0392 C5                  767 	push	bc
   0393 21 86 00            768 	ld	hl,#0x0086
   0396 E5                  769 	push	hl
   0397 2E 73               770 	ld	l, #0x73
   0399 E5                  771 	push	hl
   039A 2E F3               772 	ld	l, #0xf3
   039C E5                  773 	push	hl
   039D 2E C7               774 	ld	l, #0xc7
   039F E5                  775 	push	hl
   03A0 2E 4F               776 	ld	l, #0x4f
   03A2 E5                  777 	push	hl
   03A3 21 00 0A            778 	ld	hl,#0x0a00
   03A6 E5                  779 	push	hl
   03A7 CDr00r00            780 	call	_PlayFx
   03AA E8 0C               781 	add	sp, #12
   03AC C1                  782 	pop	bc
   03AD                     783 00122$:
                            784 ;SpritePlayer.c:84: if(spr->type == SPRITE_ENEMY2) {
   03AD 0A                  785 	ld	a,(bc)
   03AE D6 02               786 	sub	a, #0x02
   03B0 C2rEFr03            787 	jp	NZ,00126$
                            788 ;SpritePlayer.c:85: if(CheckCollision(THIS, spr)) {
   03B3 C5                  789 	push	bc
   03B4 F8 03               790 	ldhl	sp,#3
   03B6 2A                  791 	ld	a,(hl+)
   03B7 66                  792 	ld	h,(hl)
   03B8 6F                  793 	ld	l,a
   03B9 E5                  794 	push	hl
   03BA 21r00r00            795 	ld	hl,#_THIS
   03BD 2A                  796 	ld	a,(hl+)
   03BE 66                  797 	ld	h,(hl)
   03BF 6F                  798 	ld	l,a
   03C0 E5                  799 	push	hl
   03C1 CDr00r00            800 	call	_CheckCollision
   03C4 E8 04               801 	add	sp, #4
   03C6 C1                  802 	pop	bc
   03C7 7B                  803 	ld	a,e
   03C8 B7                  804 	or	a, a
   03C9 28 24               805 	jr	Z,00126$
                            806 ;SpritePlayer.c:86: SetState(STATE_MENU);
   03CB C5                  807 	push	bc
   03CC AF                  808 	xor	a, a
   03CD F5                  809 	push	af
   03CE 33                  810 	inc	sp
   03CF CDr00r00            811 	call	_SetState
   03D2 33                  812 	inc	sp
   03D3 C1                  813 	pop	bc
                            814 ;SpritePlayer.c:87: PlayFx(CHANNEL_1, 10, 0x4f, 0xc7, 0xf3, 0x73, 0x86);
   03D4 C5                  815 	push	bc
   03D5 21 86 00            816 	ld	hl,#0x0086
   03D8 E5                  817 	push	hl
   03D9 2E 73               818 	ld	l, #0x73
   03DB E5                  819 	push	hl
   03DC 2E F3               820 	ld	l, #0xf3
   03DE E5                  821 	push	hl
   03DF 2E C7               822 	ld	l, #0xc7
   03E1 E5                  823 	push	hl
   03E2 2E 4F               824 	ld	l, #0x4f
   03E4 E5                  825 	push	hl
   03E5 21 00 0A            826 	ld	hl,#0x0a00
   03E8 E5                  827 	push	hl
   03E9 CDr00r00            828 	call	_PlayFx
   03EC E8 0C               829 	add	sp, #12
   03EE C1                  830 	pop	bc
   03EF                     831 00126$:
                            832 ;SpritePlayer.c:90: if(spr->type == SPRITE_ENEMY3) {
   03EF 0A                  833 	ld	a,(bc)
   03F0 D6 08               834 	sub	a, #0x08
   03F2 C2r31r04            835 	jp	NZ,00130$
                            836 ;SpritePlayer.c:91: if(CheckCollision(THIS, spr)) {
   03F5 C5                  837 	push	bc
   03F6 F8 03               838 	ldhl	sp,#3
   03F8 2A                  839 	ld	a,(hl+)
   03F9 66                  840 	ld	h,(hl)
   03FA 6F                  841 	ld	l,a
   03FB E5                  842 	push	hl
   03FC 21r00r00            843 	ld	hl,#_THIS
   03FF 2A                  844 	ld	a,(hl+)
   0400 66                  845 	ld	h,(hl)
   0401 6F                  846 	ld	l,a
   0402 E5                  847 	push	hl
   0403 CDr00r00            848 	call	_CheckCollision
   0406 E8 04               849 	add	sp, #4
   0408 C1                  850 	pop	bc
   0409 7B                  851 	ld	a,e
   040A B7                  852 	or	a, a
   040B 28 24               853 	jr	Z,00130$
                            854 ;SpritePlayer.c:92: SetState(STATE_MENU);
   040D C5                  855 	push	bc
   040E AF                  856 	xor	a, a
   040F F5                  857 	push	af
   0410 33                  858 	inc	sp
   0411 CDr00r00            859 	call	_SetState
   0414 33                  860 	inc	sp
   0415 C1                  861 	pop	bc
                            862 ;SpritePlayer.c:93: PlayFx(CHANNEL_1, 10, 0x4f, 0xc7, 0xf3, 0x73, 0x86);
   0416 C5                  863 	push	bc
   0417 21 86 00            864 	ld	hl,#0x0086
   041A E5                  865 	push	hl
   041B 2E 73               866 	ld	l, #0x73
   041D E5                  867 	push	hl
   041E 2E F3               868 	ld	l, #0xf3
   0420 E5                  869 	push	hl
   0421 2E C7               870 	ld	l, #0xc7
   0423 E5                  871 	push	hl
   0424 2E 4F               872 	ld	l, #0x4f
   0426 E5                  873 	push	hl
   0427 21 00 0A            874 	ld	hl,#0x0a00
   042A E5                  875 	push	hl
   042B CDr00r00            876 	call	_PlayFx
   042E E8 0C               877 	add	sp, #12
   0430 C1                  878 	pop	bc
   0431                     879 00130$:
                            880 ;SpritePlayer.c:96: if (spr->type == SPRITE_BOMB) {
   0431 0A                  881 	ld	a,(bc)
   0432 D6 06               882 	sub	a, #0x06
   0434 C2r73r04            883 	jp	NZ,00134$
                            884 ;SpritePlayer.c:97: if (CheckCollision(THIS, spr)) {
   0437 C5                  885 	push	bc
   0438 F8 03               886 	ldhl	sp,#3
   043A 2A                  887 	ld	a,(hl+)
   043B 66                  888 	ld	h,(hl)
   043C 6F                  889 	ld	l,a
   043D E5                  890 	push	hl
   043E 21r00r00            891 	ld	hl,#_THIS
   0441 2A                  892 	ld	a,(hl+)
   0442 66                  893 	ld	h,(hl)
   0443 6F                  894 	ld	l,a
   0444 E5                  895 	push	hl
   0445 CDr00r00            896 	call	_CheckCollision
   0448 E8 04               897 	add	sp, #4
   044A C1                  898 	pop	bc
   044B 7B                  899 	ld	a,e
   044C B7                  900 	or	a, a
   044D 28 24               901 	jr	Z,00134$
                            902 ;SpritePlayer.c:98: SetState(STATE_MENU);
   044F C5                  903 	push	bc
   0450 AF                  904 	xor	a, a
   0451 F5                  905 	push	af
   0452 33                  906 	inc	sp
   0453 CDr00r00            907 	call	_SetState
   0456 33                  908 	inc	sp
   0457 C1                  909 	pop	bc
                            910 ;SpritePlayer.c:99: PlayFx(CHANNEL_1, 10, 0x4f, 0xc7, 0xf3, 0x73, 0x86);
   0458 C5                  911 	push	bc
   0459 21 86 00            912 	ld	hl,#0x0086
   045C E5                  913 	push	hl
   045D 2E 73               914 	ld	l, #0x73
   045F E5                  915 	push	hl
   0460 2E F3               916 	ld	l, #0xf3
   0462 E5                  917 	push	hl
   0463 2E C7               918 	ld	l, #0xc7
   0465 E5                  919 	push	hl
   0466 2E 4F               920 	ld	l, #0x4f
   0468 E5                  921 	push	hl
   0469 21 00 0A            922 	ld	hl,#0x0a00
   046C E5                  923 	push	hl
   046D CDr00r00            924 	call	_PlayFx
   0470 E8 0C               925 	add	sp, #12
   0472 C1                  926 	pop	bc
   0473                     927 00134$:
                            928 ;SpritePlayer.c:102: if (spr->type == SPRITE_BOMB_L) {
   0473 0A                  929 	ld	a,(bc)
   0474 D6 07               930 	sub	a, #0x07
   0476 C2rB5r04            931 	jp	NZ,00138$
                            932 ;SpritePlayer.c:103: if (CheckCollision(THIS, spr)) {
   0479 C5                  933 	push	bc
   047A F8 03               934 	ldhl	sp,#3
   047C 2A                  935 	ld	a,(hl+)
   047D 66                  936 	ld	h,(hl)
   047E 6F                  937 	ld	l,a
   047F E5                  938 	push	hl
   0480 21r00r00            939 	ld	hl,#_THIS
   0483 2A                  940 	ld	a,(hl+)
   0484 66                  941 	ld	h,(hl)
   0485 6F                  942 	ld	l,a
   0486 E5                  943 	push	hl
   0487 CDr00r00            944 	call	_CheckCollision
   048A E8 04               945 	add	sp, #4
   048C C1                  946 	pop	bc
   048D 7B                  947 	ld	a,e
   048E B7                  948 	or	a, a
   048F 28 24               949 	jr	Z,00138$
                            950 ;SpritePlayer.c:104: SetState(STATE_MENU);
   0491 C5                  951 	push	bc
   0492 AF                  952 	xor	a, a
   0493 F5                  953 	push	af
   0494 33                  954 	inc	sp
   0495 CDr00r00            955 	call	_SetState
   0498 33                  956 	inc	sp
   0499 C1                  957 	pop	bc
                            958 ;SpritePlayer.c:105: PlayFx(CHANNEL_1, 10, 0x4f, 0xc7, 0xf3, 0x73, 0x86);
   049A C5                  959 	push	bc
   049B 21 86 00            960 	ld	hl,#0x0086
   049E E5                  961 	push	hl
   049F 2E 73               962 	ld	l, #0x73
   04A1 E5                  963 	push	hl
   04A2 2E F3               964 	ld	l, #0xf3
   04A4 E5                  965 	push	hl
   04A5 2E C7               966 	ld	l, #0xc7
   04A7 E5                  967 	push	hl
   04A8 2E 4F               968 	ld	l, #0x4f
   04AA E5                  969 	push	hl
   04AB 21 00 0A            970 	ld	hl,#0x0a00
   04AE E5                  971 	push	hl
   04AF CDr00r00            972 	call	_PlayFx
   04B2 E8 0C               973 	add	sp, #12
   04B4 C1                  974 	pop	bc
   04B5                     975 00138$:
                            976 ;SpritePlayer.c:108: if (spr->type == SPRITE_KEY) {
   04B5 0A                  977 	ld	a,(bc)
   04B6 D6 03               978 	sub	a, #0x03
   04B8 C2r20r05            979 	jp	NZ,00142$
                            980 ;SpritePlayer.c:109: if (CheckCollision(THIS, spr)) {
   04BB C5                  981 	push	bc
   04BC F8 03               982 	ldhl	sp,#3
   04BE 2A                  983 	ld	a,(hl+)
   04BF 66                  984 	ld	h,(hl)
   04C0 6F                  985 	ld	l,a
   04C1 E5                  986 	push	hl
   04C2 21r00r00            987 	ld	hl,#_THIS
   04C5 2A                  988 	ld	a,(hl+)
   04C6 66                  989 	ld	h,(hl)
   04C7 6F                  990 	ld	l,a
   04C8 E5                  991 	push	hl
   04C9 CDr00r00            992 	call	_CheckCollision
   04CC E8 04               993 	add	sp, #4
   04CE C1                  994 	pop	bc
   04CF 7B                  995 	ld	a,e
   04D0 B7                  996 	or	a, a
   04D1 CAr20r05            997 	jp	Z,00142$
                            998 ;SpritePlayer.c:110: SpriteManagerRemoveSprite(spr);
   04D4 C5                  999 	push	bc
   04D5 F8 03              1000 	ldhl	sp,#3
   04D7 2A                 1001 	ld	a,(hl+)
   04D8 66                 1002 	ld	h,(hl)
   04D9 6F                 1003 	ld	l,a
   04DA E5                 1004 	push	hl
   04DB CDr00r00           1005 	call	_SpriteManagerRemoveSprite
   04DE E8 02              1006 	add	sp, #2
   04E0 C1                 1007 	pop	bc
                           1008 ;SpritePlayer.c:111: SpriteManagerRemove(2); //need to place door always as 2 sprite
   04E1 C5                 1009 	push	bc
   04E2 21 02 00           1010 	ld	hl,#0x0002
   04E5 E5                 1011 	push	hl
   04E6 CDr00r00           1012 	call	_SpriteManagerRemove
   04E9 E8 02              1013 	add	sp, #2
   04EB C1                 1014 	pop	bc
                           1015 ;SpritePlayer.c:112: SpriteManagerAdd(SPRITE_DOOROPEN, door_x, door_y);
   04EC C5                 1016 	push	bc
   04ED 21r03r00           1017 	ld	hl,#_door_y
   04F0 2A                 1018 	ld	a,(hl+)
   04F1 66                 1019 	ld	h,(hl)
   04F2 6F                 1020 	ld	l,a
   04F3 E5                 1021 	push	hl
   04F4 21r01r00           1022 	ld	hl,#_door_x
   04F7 2A                 1023 	ld	a,(hl+)
   04F8 66                 1024 	ld	h,(hl)
   04F9 6F                 1025 	ld	l,a
   04FA E5                 1026 	push	hl
   04FB 3E 05              1027 	ld	a,#0x05
   04FD F5                 1028 	push	af
   04FE 33                 1029 	inc	sp
   04FF CDr00r00           1030 	call	_SpriteManagerAdd
   0502 E8 05              1031 	add	sp, #5
   0504 C1                 1032 	pop	bc
                           1033 ;SpritePlayer.c:113: PlayFx(CHANNEL_1, 10, 0x4U, 0xFEU, 0xA1U, 0x8FU, 0x86U);
   0505 C5                 1034 	push	bc
   0506 21 86 00           1035 	ld	hl,#0x0086
   0509 E5                 1036 	push	hl
   050A 2E 8F              1037 	ld	l, #0x8f
   050C E5                 1038 	push	hl
   050D 2E A1              1039 	ld	l, #0xa1
   050F E5                 1040 	push	hl
   0510 2E FE              1041 	ld	l, #0xfe
   0512 E5                 1042 	push	hl
   0513 2E 04              1043 	ld	l, #0x04
   0515 E5                 1044 	push	hl
   0516 21 00 0A           1045 	ld	hl,#0x0a00
   0519 E5                 1046 	push	hl
   051A CDr00r00           1047 	call	_PlayFx
   051D E8 0C              1048 	add	sp, #12
   051F C1                 1049 	pop	bc
   0520                    1050 00142$:
                           1051 ;SpritePlayer.c:116: if (spr->type == SPRITE_DOOROPEN) {
   0520 0A                 1052 	ld	a,(bc)
   0521 D6 05              1053 	sub	a, #0x05
   0523 20 20              1054 	jr	NZ,00150$
                           1055 ;SpritePlayer.c:117: if (CheckCollision(THIS, spr)) {
   0525 F8 01              1056 	ldhl	sp,#1
   0527 2A                 1057 	ld	a,(hl+)
   0528 66                 1058 	ld	h,(hl)
   0529 6F                 1059 	ld	l,a
   052A E5                 1060 	push	hl
   052B 21r00r00           1061 	ld	hl,#_THIS
   052E 2A                 1062 	ld	a,(hl+)
   052F 66                 1063 	ld	h,(hl)
   0530 6F                 1064 	ld	l,a
   0531 E5                 1065 	push	hl
   0532 CDr00r00           1066 	call	_CheckCollision
   0535 E8 04              1067 	add	sp, #4
   0537 7B                 1068 	ld	a,e
   0538 B7                 1069 	or	a, a
   0539 28 0A              1070 	jr	Z,00150$
                           1071 ;SpritePlayer.c:118: SetState(next_lvl);
   053B 21r05r00           1072 	ld	hl,#_next_lvl
   053E 46                 1073 	ld	b,(hl)
   053F C5                 1074 	push	bc
   0540 33                 1075 	inc	sp
   0541 CDr00r00           1076 	call	_SetState
   0544 33                 1077 	inc	sp
   0545                    1078 00150$:
                           1079 ;SpritePlayer.c:76: SPRITEMANAGER_ITERATE(i, spr) {
   0545 F8 00              1080 	ldhl	sp,#0
   0547 34                 1081 	inc	(hl)
   0548 4E                 1082 	ld	c,(hl)
   0549 06 00              1083 	ld	b,#0x00
   054B 03                 1084 	inc	bc
   054C 21r00r00           1085 	ld	hl,#_sprite_manager_updatables
   054F 09                 1086 	add	hl,bc
   0550 4D                 1087 	ld	c,l
   0551 44                 1088 	ld	b,h
   0552 0A                 1089 	ld	a,(bc)
   0553 4F                 1090 	ld	c,a
   0554 06 00              1091 	ld	b,#0x00
   0556 CB 21              1092 	sla	c
   0558 CB 10              1093 	rl	b
   055A 21r00r00           1094 	ld	hl,#_sprite_manager_sprites
   055D 09                 1095 	add	hl,bc
   055E 4D                 1096 	ld	c,l
   055F 44                 1097 	ld	b,h
   0560 59                 1098 	ld	e, c
   0561 50                 1099 	ld	d, b
   0562 1A                 1100 	ld	a,(de)
   0563 F8 01              1101 	ldhl	sp,#1
   0565 22                 1102 	ld	(hl+),a
   0566 13                 1103 	inc	de
   0567 1A                 1104 	ld	a,(de)
   0568 77                 1105 	ld	(hl),a
   0569 C3r55r03           1106 	jp	00149$
   056C                    1107 00151$:
   056C E8 05              1108 	add	sp, #5
   056E C9                 1109 	ret
                           1110 ;SpritePlayer.c:124: void Destroy_SPRITE_PLAYER() {
                           1111 ;	---------------------------------
                           1112 ; Function Destroy_SPRITE_PLAYER
                           1113 ; ---------------------------------
   056F                    1114 _Destroy_SPRITE_PLAYER::
                           1115 ;SpritePlayer.c:125: }
   056F C9                 1116 	ret
                           1117 	.area _CODE_2
                           1118 	.area _CABS (ABS)
