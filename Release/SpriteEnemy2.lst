                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.6.0 #9615 (MINGW64)
                              4 ;--------------------------------------------------------
                              5 	.module SpriteEnemy2
                              6 	.optsdcc -mgbz80
                              7 	
                              8 ;--------------------------------------------------------
                              9 ; Public variables in this module
                             10 ;--------------------------------------------------------
                             11 	.globl _SpriteManagerRemoveSprite
                             12 	.globl _PlayFx
                             13 	.globl _CheckCollision
                             14 	.globl _TranslateSprite
                             15 	.globl _SetSpriteAnim
                             16 	.globl _dir_pointer2
                             17 	.globl _dir2
                             18 	.globl _bank_SPRITE_ENEMY2
                             19 	.globl _anime_right
                             20 	.globl _anime_left
                             21 	.globl _Start_SPRITE_ENEMY2
                             22 	.globl _Update_SPRITE_ENEMY2
                             23 	.globl _Destroy_SPRITE_ENEMY2
                             24 ;--------------------------------------------------------
                             25 ; ram data
                             26 ;--------------------------------------------------------
                             27 	.area _DATA
   0000                      28 _bank_SPRITE_ENEMY2::
   0000                      29 	.ds 1
   0001                      30 _dir2::
   0001                      31 	.ds 2
   0003                      32 _dir_pointer2::
   0003                      33 	.ds 2
                             34 ;--------------------------------------------------------
                             35 ; absolute external ram data
                             36 ;--------------------------------------------------------
                             37 	.area _DABS (ABS)
                             38 ;--------------------------------------------------------
                             39 ; global & static initialisations
                             40 ;--------------------------------------------------------
                             41 	.area _HOME
                             42 	.area _GSINIT
                             43 	.area _GSFINAL
                             44 	.area _GSINIT
                             45 ;SpriteEnemy2.c:3: UINT8 bank_SPRITE_ENEMY2 = 2;
   0000 21r00r00             46 	ld	hl,#_bank_SPRITE_ENEMY2
   0003 36 02                47 	ld	(hl),#0x02
                             48 ;SpriteEnemy2.c:12: int dir2=0;
   0005 21r01r00             49 	ld	hl,#_dir2
   0008 36 00                50 	ld	(hl),#0x00
   000A 23                   51 	inc	hl
   000B 36 00                52 	ld	(hl),#0x00
                             53 ;SpriteEnemy2.c:13: int *dir_pointer2 = NULL;
   000D 21r03r00             54 	ld	hl,#_dir_pointer2
   0010 36 00                55 	ld	(hl),#0x00
   0012 23                   56 	inc	hl
   0013 36 00                57 	ld	(hl),#0x00
                             58 ;--------------------------------------------------------
                             59 ; Home
                             60 ;--------------------------------------------------------
                             61 	.area _HOME
                             62 	.area _HOME
                             63 ;--------------------------------------------------------
                             64 ; code
                             65 ;--------------------------------------------------------
                             66 	.area _CODE_2
                             67 ;SpriteEnemy2.c:22: void Start_SPRITE_ENEMY2() {
                             68 ;	---------------------------------
                             69 ; Function Start_SPRITE_ENEMY2
                             70 ; ---------------------------------
   0000                      71 _Start_SPRITE_ENEMY2::
   0000 E8 FC                72 	add	sp, #-4
                             73 ;SpriteEnemy2.c:23: struct EnemyInfo* data = (struct EnemyInfo*)THIS->custom_data;
   0002 21r01r00             74 	ld	hl,#_THIS + 1
   0005 2B                   75 	dec	hl
   0006 4E                   76 	ld	c,(hl)
   0007 23                   77 	inc	hl
   0008 46                   78 	ld	b,(hl)
   0009 21 18 00             79 	ld	hl,#0x0018
   000C 09                   80 	add	hl,bc
   000D 7D                   81 	ld	a,l
   000E 54                   82 	ld	d,h
   000F F8 02                83 	ldhl	sp,#2
   0011 22                   84 	ld	(hl+),a
   0012 72                   85 	ld	(hl),d
   0013 2B                   86 	dec	hl
   0014 2A                   87 	ld	a,(hl+)
   0015 5E                   88 	ld	e, (hl)
   0016 F8 00                89 	ldhl	sp,#0
   0018 22                   90 	ld	(hl+),a
   0019 73                   91 	ld	(hl),e
                             92 ;SpriteEnemy2.c:24: THIS->lim_x=9999;
   001A 21 12 00             93 	ld	hl,#0x0012
   001D 09                   94 	add	hl,bc
   001E 4D                   95 	ld	c,l
   001F 44                   96 	ld	b,h
   0020 3E 0F                97 	ld	a,#0x0f
   0022 02                   98 	ld	(bc),a
   0023 03                   99 	inc	bc
   0024 3E 27               100 	ld	a,#0x27
   0026 02                  101 	ld	(bc),a
                            102 ;SpriteEnemy2.c:25: THIS->lim_y=9999;
   0027 21r01r00            103 	ld	hl,#_THIS + 1
   002A 2B                  104 	dec	hl
   002B 4E                  105 	ld	c,(hl)
   002C 23                  106 	inc	hl
   002D 46                  107 	ld	b,(hl)
   002E 21 14 00            108 	ld	hl,#0x0014
   0031 09                  109 	add	hl,bc
   0032 4D                  110 	ld	c,l
   0033 44                  111 	ld	b,h
   0034 3E 0F               112 	ld	a,#0x0f
   0036 02                  113 	ld	(bc),a
   0037 03                  114 	inc	bc
   0038 3E 27               115 	ld	a,#0x27
   003A 02                  116 	ld	(bc),a
                            117 ;SpriteEnemy2.c:26: data->vx = 1;
   003B E1                  118 	pop	hl
   003C E5                  119 	push	hl
   003D 36 01               120 	ld	(hl),#0x01
                            121 ;SpriteEnemy2.c:28: SetSpriteAnim(THIS, anime_right, 15);
   003F 3E 0F               122 	ld	a,#0x0f
   0041 F5                  123 	push	af
   0042 33                  124 	inc	sp
   0043 21r5Ar00            125 	ld	hl,#_anime_right
   0046 E5                  126 	push	hl
   0047 21r00r00            127 	ld	hl,#_THIS
   004A 2A                  128 	ld	a,(hl+)
   004B 66                  129 	ld	h,(hl)
   004C 6F                  130 	ld	l,a
   004D E5                  131 	push	hl
   004E CDr00r00            132 	call	_SetSpriteAnim
   0051 E8 05               133 	add	sp, #5
   0053 E8 04               134 	add	sp, #4
   0055 C9                  135 	ret
   0056                     136 _anime_left:
   0056 03                  137 	.db #0x03	; 3
   0057 00                  138 	.db #0x00	; 0
   0058 01                  139 	.db #0x01	; 1
   0059 02                  140 	.db #0x02	; 2
   005A                     141 _anime_right:
   005A 03                  142 	.db #0x03	; 3
   005B 03                  143 	.db #0x03	; 3
   005C 04                  144 	.db #0x04	; 4
   005D 05                  145 	.db #0x05	; 5
                            146 ;SpriteEnemy2.c:32: void Update_SPRITE_ENEMY2() {
                            147 ;	---------------------------------
                            148 ; Function Update_SPRITE_ENEMY2
                            149 ; ---------------------------------
   005E                     150 _Update_SPRITE_ENEMY2::
   005E E8 FC               151 	add	sp, #-4
                            152 ;SpriteEnemy2.c:35: struct EnemyInfo* data = (struct EnemyInfo*)THIS->custom_data;
   0060 21r01r00            153 	ld	hl,#_THIS + 1
   0063 2B                  154 	dec	hl
   0064 4E                  155 	ld	c,(hl)
   0065 23                  156 	inc	hl
   0066 46                  157 	ld	b,(hl)
   0067 21 18 00            158 	ld	hl,#0x0018
   006A 09                  159 	add	hl,bc
   006B 4D                  160 	ld	c,l
   006C 44                  161 	ld	b,h
                            162 ;SpriteEnemy2.c:36: dir_pointer2 = &dir2;
   006D 21r03r00            163 	ld	hl,#_dir_pointer2
   0070 36r01               164 	ld	(hl),#<(_dir2)
   0072 23                  165 	inc	hl
   0073 36s00               166 	ld	(hl),#>(_dir2)
                            167 ;SpriteEnemy2.c:38: if(TranslateSprite(THIS, data->vx << delta_time,0)) {
   0075 0A                  168 	ld	a,(bc)
   0076 57                  169 	ld	d,a
   0077 21r00r00            170 	ld	hl,#_delta_time
   007A 7E                  171 	ld	a,(hl)
   007B 3C                  172 	inc	a
   007C 18 02               173 	jr	00143$
   007E                     174 00142$:
   007E CB 22               175 	sla	d
   0080                     176 00143$:
   0080 3D                  177 	dec	a
   0081 20 FB               178 	jr	NZ,00142$
   0083 C5                  179 	push	bc
   0084 AF                  180 	xor	a, a
   0085 F5                  181 	push	af
   0086 33                  182 	inc	sp
   0087 D5                  183 	push	de
   0088 33                  184 	inc	sp
   0089 21r00r00            185 	ld	hl,#_THIS
   008C 2A                  186 	ld	a,(hl+)
   008D 66                  187 	ld	h,(hl)
   008E 6F                  188 	ld	l,a
   008F E5                  189 	push	hl
   0090 CDr00r00            190 	call	_TranslateSprite
   0093 E8 04               191 	add	sp, #4
   0095 C1                  192 	pop	bc
   0096 7B                  193 	ld	a,e
   0097 B7                  194 	or	a, a
   0098 CAr07r01            195 	jp	Z,00105$
                            196 ;SpriteEnemy2.c:40: data->vx = -data->vx;
   009B 0A                  197 	ld	a,(bc)
   009C F8 03               198 	ldhl	sp,#3
   009E 77                  199 	ld	(hl),a
   009F AF                  200 	xor	a, a
   00A0 96                  201 	sub	a, (hl)
   00A1 77                  202 	ld	(hl),a
   00A2 7E                  203 	ld	a,(hl)
   00A3 02                  204 	ld	(bc),a
                            205 ;SpriteEnemy2.c:42: PlayFx(CHANNEL_4, 4, 0x0c, 0x41, 0x30, 0xc0);
   00A4 21 C0 00            206 	ld	hl,#0x00c0
   00A7 E5                  207 	push	hl
   00A8 2E 30               208 	ld	l, #0x30
   00AA E5                  209 	push	hl
   00AB 2E 41               210 	ld	l, #0x41
   00AD E5                  211 	push	hl
   00AE 2E 0C               212 	ld	l, #0x0c
   00B0 E5                  213 	push	hl
   00B1 21 03 04            214 	ld	hl,#0x0403
   00B4 E5                  215 	push	hl
   00B5 CDr00r00            216 	call	_PlayFx
   00B8 E8 0A               217 	add	sp, #10
                            218 ;SpriteEnemy2.c:43: if (dir2 == 0 ) {
   00BA 21r02r00            219 	ld	hl,#_dir2 + 1
   00BD 3A                  220 	ld	a,(hl-)
   00BE B6                  221 	or	a,(hl)
   00BF 20 24               222 	jr	NZ,00102$
                            223 ;SpriteEnemy2.c:44: SetSpriteAnim(THIS, anime_left, 15);
   00C1 3E 0F               224 	ld	a,#0x0f
   00C3 F5                  225 	push	af
   00C4 33                  226 	inc	sp
   00C5 21r56r00            227 	ld	hl,#_anime_left
   00C8 E5                  228 	push	hl
   00C9 21r00r00            229 	ld	hl,#_THIS
   00CC 2A                  230 	ld	a,(hl+)
   00CD 66                  231 	ld	h,(hl)
   00CE 6F                  232 	ld	l,a
   00CF E5                  233 	push	hl
   00D0 CDr00r00            234 	call	_SetSpriteAnim
   00D3 E8 05               235 	add	sp, #5
                            236 ;SpriteEnemy2.c:45: *dir_pointer2 = 1;
   00D5 21r04r00            237 	ld	hl,#_dir_pointer2 + 1
   00D8 2B                  238 	dec	hl
   00D9 4E                  239 	ld	c,(hl)
   00DA 23                  240 	inc	hl
   00DB 46                  241 	ld	b,(hl)
   00DC 3E 01               242 	ld	a,#0x01
   00DE 02                  243 	ld	(bc),a
   00DF 03                  244 	inc	bc
   00E0 3E 00               245 	ld	a,#0x00
   00E2 02                  246 	ld	(bc),a
   00E3 18 22               247 	jr	00105$
   00E5                     248 00102$:
                            249 ;SpriteEnemy2.c:48: SetSpriteAnim(THIS, anime_right, 15);
   00E5 3E 0F               250 	ld	a,#0x0f
   00E7 F5                  251 	push	af
   00E8 33                  252 	inc	sp
   00E9 21r5Ar00            253 	ld	hl,#_anime_right
   00EC E5                  254 	push	hl
   00ED 21r00r00            255 	ld	hl,#_THIS
   00F0 2A                  256 	ld	a,(hl+)
   00F1 66                  257 	ld	h,(hl)
   00F2 6F                  258 	ld	l,a
   00F3 E5                  259 	push	hl
   00F4 CDr00r00            260 	call	_SetSpriteAnim
   00F7 E8 05               261 	add	sp, #5
                            262 ;SpriteEnemy2.c:49: *dir_pointer2 = 0;
   00F9 21r04r00            263 	ld	hl,#_dir_pointer2 + 1
   00FC 2B                  264 	dec	hl
   00FD 4E                  265 	ld	c,(hl)
   00FE 23                  266 	inc	hl
   00FF 46                  267 	ld	b,(hl)
   0100 3E 00               268 	ld	a,#0x00
   0102 02                  269 	ld	(bc),a
   0103 03                  270 	inc	bc
   0104 3E 00               271 	ld	a,#0x00
   0106 02                  272 	ld	(bc),a
   0107                     273 00105$:
                            274 ;SpriteEnemy2.c:55: SPRITEMANAGER_ITERATE(i, spr) {
   0107 FAr01r00            275 	ld	a, (#(_sprite_manager_updatables + 0x0001) + 0)
   010A 4F                  276 	ld	c,a
   010B 06 00               277 	ld	b,#0x00
   010D CB 21               278 	sla	c
   010F CB 10               279 	rl	b
   0111 21r00r00            280 	ld	hl,#_sprite_manager_sprites
   0114 09                  281 	add	hl,bc
   0115 4D                  282 	ld	c,l
   0116 44                  283 	ld	b,h
   0117 59                  284 	ld	e, c
   0118 50                  285 	ld	d, b
   0119 1A                  286 	ld	a,(de)
   011A F8 00               287 	ldhl	sp,#0
   011C 22                  288 	ld	(hl+),a
   011D 13                  289 	inc	de
   011E 1A                  290 	ld	a,(de)
   011F 22                  291 	ld	(hl+),a
   0120 36 00               292 	ld	(hl),#0x00
   0122                     293 00113$:
   0122 11r00r00            294 	ld	de, #_sprite_manager_updatables + 0
   0125 1A                  295 	ld	a,(de)
   0126 4F                  296 	ld	c,a
   0127 F8 02               297 	ldhl	sp,#2
   0129 7E                  298 	ld	a,(hl)
   012A 91                  299 	sub	a, c
   012B CArA9r01            300 	jp	Z,00115$
                            301 ;SpriteEnemy2.c:56: if (spr->type == SPRITE_BOMB || spr->type == SPRITE_BOMB_L) {
   012E D1                  302 	pop	de
   012F D5                  303 	push	de
   0130 21 10 00            304 	ld	hl,#0x0010
   0133 19                  305 	add	hl,de
   0134 4D                  306 	ld	c,l
   0135 44                  307 	ld	b,h
   0136 0A                  308 	ld	a,(bc)
   0137 4F                  309 	ld	c,a
   0138 D6 06               310 	sub	a, #0x06
   013A 28 06               311 	jr	Z,00108$
   013C 79                  312 	ld	a,c
   013D D6 07               313 	sub	a, #0x07
   013F C2r82r01            314 	jp	NZ,00114$
   0142                     315 00108$:
                            316 ;SpriteEnemy2.c:57: if (CheckCollision(THIS, spr)) {
   0142 E1                  317 	pop	hl
   0143 E5                  318 	push	hl
   0144 E5                  319 	push	hl
   0145 21r00r00            320 	ld	hl,#_THIS
   0148 2A                  321 	ld	a,(hl+)
   0149 66                  322 	ld	h,(hl)
   014A 6F                  323 	ld	l,a
   014B E5                  324 	push	hl
   014C CDr00r00            325 	call	_CheckCollision
   014F E8 04               326 	add	sp, #4
   0151 7B                  327 	ld	a,e
   0152 B7                  328 	or	a, a
   0153 28 2D               329 	jr	Z,00114$
                            330 ;SpriteEnemy2.c:58: SpriteManagerRemoveSprite(THIS);
   0155 21r00r00            331 	ld	hl,#_THIS
   0158 2A                  332 	ld	a,(hl+)
   0159 66                  333 	ld	h,(hl)
   015A 6F                  334 	ld	l,a
   015B E5                  335 	push	hl
   015C CDr00r00            336 	call	_SpriteManagerRemoveSprite
   015F E8 02               337 	add	sp, #2
                            338 ;SpriteEnemy2.c:59: PlayFx(CHANNEL_1, 10, 0x1e, 0x10, 0xf3, 0x00, 0x87);
   0161 21 87 00            339 	ld	hl,#0x0087
   0164 E5                  340 	push	hl
   0165 2E 00               341 	ld	l, #0x00
   0167 E5                  342 	push	hl
   0168 2E F3               343 	ld	l, #0xf3
   016A E5                  344 	push	hl
   016B 2E 10               345 	ld	l, #0x10
   016D E5                  346 	push	hl
   016E 2E 1E               347 	ld	l, #0x1e
   0170 E5                  348 	push	hl
   0171 21 00 0A            349 	ld	hl,#0x0a00
   0174 E5                  350 	push	hl
   0175 CDr00r00            351 	call	_PlayFx
   0178 E8 0C               352 	add	sp, #12
                            353 ;SpriteEnemy2.c:60: SpriteManagerRemoveSprite(spr);
   017A E1                  354 	pop	hl
   017B E5                  355 	push	hl
   017C E5                  356 	push	hl
   017D CDr00r00            357 	call	_SpriteManagerRemoveSprite
   0180 E8 02               358 	add	sp, #2
   0182                     359 00114$:
                            360 ;SpriteEnemy2.c:55: SPRITEMANAGER_ITERATE(i, spr) {
   0182 F8 02               361 	ldhl	sp,#2
   0184 34                  362 	inc	(hl)
   0185 4E                  363 	ld	c,(hl)
   0186 06 00               364 	ld	b,#0x00
   0188 03                  365 	inc	bc
   0189 21r00r00            366 	ld	hl,#_sprite_manager_updatables
   018C 09                  367 	add	hl,bc
   018D 4D                  368 	ld	c,l
   018E 44                  369 	ld	b,h
   018F 0A                  370 	ld	a,(bc)
   0190 4F                  371 	ld	c,a
   0191 06 00               372 	ld	b,#0x00
   0193 CB 21               373 	sla	c
   0195 CB 10               374 	rl	b
   0197 21r00r00            375 	ld	hl,#_sprite_manager_sprites
   019A 09                  376 	add	hl,bc
   019B 4D                  377 	ld	c,l
   019C 44                  378 	ld	b,h
   019D 59                  379 	ld	e, c
   019E 50                  380 	ld	d, b
   019F 1A                  381 	ld	a,(de)
   01A0 F8 00               382 	ldhl	sp,#0
   01A2 22                  383 	ld	(hl+),a
   01A3 13                  384 	inc	de
   01A4 1A                  385 	ld	a,(de)
   01A5 77                  386 	ld	(hl),a
   01A6 C3r22r01            387 	jp	00113$
   01A9                     388 00115$:
   01A9 E8 04               389 	add	sp, #4
   01AB C9                  390 	ret
                            391 ;SpriteEnemy2.c:68: void Destroy_SPRITE_ENEMY2() {
                            392 ;	---------------------------------
                            393 ; Function Destroy_SPRITE_ENEMY2
                            394 ; ---------------------------------
   01AC                     395 _Destroy_SPRITE_ENEMY2::
                            396 ;SpriteEnemy2.c:69: }
   01AC C9                  397 	ret
                            398 	.area _CODE_2
                            399 	.area _CABS (ABS)
